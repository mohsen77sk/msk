<div class="m-6 mb-0 flex items-center justify-between" *transloco="let t">
  <span class="text-title-medium">{{ t('dashboard.payment-summary') }}</span>
  <div class="ms-1">
    <button matButton="tonal" class="text-label-medium h-6 min-h-6 px-3" [matMenuTriggerFor]="menu">
      <span>{{ t(idToNameKey[dateRange.value?.key ?? 'today']) }}</span>
    </button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item (click)="changeDateRange('today')">
        <span>{{ t('filter-date.today') }}</span>
      </button>
      <button mat-menu-item (click)="changeDateRange('yesterday')">
        <span>{{ t('filter-date.yesterday') }}</span>
      </button>
      <button mat-menu-item (click)="changeDateRange('lastWeek')">
        <span>{{ t('filter-date.last-week') }}</span>
      </button>
      <button mat-menu-item (click)="changeDateRange('lastMonth')">
        <span>{{ t('filter-date.last-month') }}</span>
      </button>
    </mat-menu>
  </div>
</div>
<div class="mt-3 flex h-80 flex-auto flex-col">
  @if (!isLoading()) {
    <apx-chart
      class="h-full w-full flex-auto"
      [chart]="chartOptions.chart!"
      [colors]="chartOptions.colors!"
      [labels]="chartOptions.labels!"
      [plotOptions]="chartOptions.plotOptions!"
      [stroke]="chartOptions.stroke!"
      [series]="chartOptions.series!"
      [states]="chartOptions.states!"
      [tooltip]="chartOptions.tooltip!"
    ></apx-chart>
  } @else {
    <div class="flex h-full w-full flex-auto items-center justify-center">
      <mat-spinner [diameter]="24"></mat-spinner>
    </div>
  }
</div>
<div class="m-6">
  <div class="divide-y">
    @for (value of paymentTypesValue; track value; let i = $index) {
      <div class="flex justify-between py-3">
        <div class="me-3 flex items-center gap-2">
          <div class="size-2 rounded-full" [style.backgroundColor]="chartOptions.colors?.[i]"></div>
          <div class="inline-flex gap-2 truncate">{{ chartOptions.labels?.[i] }}</div>
          <span class="text-on-surface-variant text-right">
            {{ (value / paymentTypesValueSum) * 100 | number: '1.0-0' }}%
          </span>
        </div>
        <div class="text-right font-medium">{{ value | number }} <span mskCurrencySymbol></span></div>
      </div>
    }
    <div class="flex justify-between pt-4 pb-3">
      <div class="me-3 flex items-center gap-2">
        <div class="inline-flex gap-2 truncate" *transloco="let t">{{ t('dashboard.total-sales') }}</div>
      </div>
      <div class="text-right font-medium">{{ paymentTypesValueSum | number }} <span mskCurrencySymbol></span></div>
    </div>
  </div>
</div>
