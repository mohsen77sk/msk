<!-- Button -->
<button matIconButton *transloco="let t" [matTooltip]="t('layout.languages')" [matMenuTriggerFor]="languages">
  <ng-container *ngTemplateOutlet="flagImage; context: { $implicit: activeLang }"></ng-container>
</button>
<!-- menu -->
<mat-menu [xPosition]="'before'" #languages="matMenu">
  @for (lang of availableLangs; track lang.id) {
    <button mat-menu-item (click)="setActiveLang(lang.id)">
      <span class="flex items-center">
        <ng-container *ngTemplateOutlet="flagImage; context: { $implicit: lang.id }"></ng-container>
        <span class="mx-3">{{ lang.label }}</span>
      </span>
    </button>
  }
</mat-menu>

<!-- Flag image template -->
<ng-template let-lang #flagImage>
  <span class="rounded-extra-small relative w-6 overflow-hidden">
    <img class="h-auto w-full" [src]="'assets/images/flags/' + lang + '.svg'" [alt]="'Flag image for ' + lang" />
  </span>
</ng-template>
