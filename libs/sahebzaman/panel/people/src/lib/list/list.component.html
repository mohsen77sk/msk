<div class="page-layout grid-scroll">
  <!-- Header -->
  <div class="header" *transloco="let t">
    <form class="flex w-full items-center" [formGroup]="filterForm">
      <div class="msk-mat-search-bar w-full">
        <mat-icon>search</mat-icon>
        <input formControlName="search" autocomplete="off" [placeholder]="t('people.search')" />
      </div>
    </form>
    <msk-sort-menu [sortData]="sortData" [sortItems]="sortItems"></msk-sort-menu>
  </div>

  <!-- Main -->
  <div class="content">
    <!-- List -->
    <cdk-virtual-scroll-viewport class="content-grid" #gridContent [itemSize]="72">
      <div
        class="content-grid-item tow-line"
        [class.pointer-events-none]="!person"
        *cdkVirtualFor="let person of dataSource; trackBy: trackById"
        [routerLink]="['card', 'view', person?.id]"
        matRipple
      >
        @if (person) {
          <!-- Avatar -->
          <div class="content-grid-item-avatar">
            <msk-avatar [name]="person.fullName"></msk-avatar>
          </div>
          <!-- Content -->
          <div class="content-grid-item-content">
            <div class="truncate">{{ person.fullName }}</div>
            <div class="truncate">
              <span>#{{ person.code }}</span>
            </div>
          </div>
          <!-- End -->
          <div class="content-grid-item-end">
            <sz-person-status [value]="person.isActive"></sz-person-status>
          </div>
        } @else {
          <div class="content-grid-item-avatar">
            <div class="skeleton skeleton-avatar"></div>
          </div>
          <div class="content-grid-item-content">
            <div class="skeleton skeleton-text skeleton-text-lg"></div>
            <div class="skeleton skeleton-text skeleton-text-sm"></div>
          </div>
          <div class="content-grid-item-end">
            <div class="skeleton skeleton-status"></div>
          </div>
        }
      </div>
    </cdk-virtual-scroll-viewport>

    <!-- Fab -->
    <div class="content-fab-container">
      <button matFab extended [routerLink]="['card', 'new']" [mskFabExtendedCollapse]="gridContent" @zoomIn>
        <mat-icon>add</mat-icon>
        <span *transloco="let t">{{ t('new') }}</span>
      </button>
    </div>
  </div>
</div>

<!-- Invisible router-outlet for card component -->
<div class="pointer-events-none invisible absolute h-0 w-0 opacity-0">
  <router-outlet></router-outlet>
</div>
