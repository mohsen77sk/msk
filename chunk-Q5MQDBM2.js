import{b as De,c as $e,d as Re,e as He,h as Oe}from"./chunk-WWTHQF7V.js";import{b as Fe}from"./chunk-LV4XTF34.js";import{b as Ne}from"./chunk-KYTRILY4.js";import{Ca as Le,Da as Pe,Ea as Ae,G as re,Ha as Be,K as le,La as Me,Q as de,S as pe,U as ue,W as he,X as me,b as se,ba as fe,ca as _e,ea as ge,fa as ke,ga as ve,ka as xe,na as Ce,pa as K,ra as we,sa as Ee,xa as Se,ya as Ie,za as Te}from"./chunk-P5B4DSWA.js";import"./chunk-5YKRFSCM.js";import{c as ae,e as oe,g as ne,h as ce}from"./chunk-CSPCB3NB.js";import{h as be,j as ye,l as Ke}from"./chunk-QZ4KBARH.js";import"./chunk-ZBT2FDIC.js";import{$b as I,Db as P,E as R,Ga as q,Ha as x,Ia as C,Ic as ee,Ka as L,Kb as G,Kc as N,Lb as h,Oc as te,Rb as j,Sb as Y,Tb as A,Ub as B,Vb as r,Wb as l,Xb as S,bc as k,bd as ie,ca as H,cc as b,ea as O,fb as U,ha as p,ib as v,jb as s,kc as X,lc as W,mc as T,nc as d,pc as u,q as $,rb as V,sa as f,ta as _,tb as z,wc as M,xb as E,xc as J,yb as Z,zb as Q}from"./chunk-LCKJWARP.js";import{c as D}from"./chunk-NWJ5J3BN.js";var Ze=o=>[o],Qe=(o,m)=>m[0];function Ge(o,m){if(o&1){let e=I();r(0,"button",3),k("pointerup",function(i){let a=f(e).$implicit,c=b(2);return _(c.handleButtonUp(a,i))})("pointerdown",function(i){let a=f(e).$implicit,c=b(2);return _(c.handleButtonDown(a,i))})("pointercancel",function(i){let a=f(e).$implicit,c=b(2);return _(c.handleButtonUp(a,i))}),l()}if(o&2){let e=m.$implicit,t=b(2);h("name",e)("dir",t.locale.dir)("ngClass",J(5,Ze,t.getButtonClass(e)))("innerHtml",t.getButtonDisplayName(e),U),G("data-layout",t.layoutMode)}}function je(o,m){if(o&1&&(r(0,"div",1),A(1,Ge,1,7,"button",2,Y),l()),o&2){let e=m.$implicit;s(),B(e)}}var g={DONE:"{done}",ENTER:"{enter}",SHIFT:"{shift}",BACKSPACE:"{backspace}",LANGUAGE:"{language}",SPACE:"{space}",TAB:"{tab}"},n={DONE:'<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24"><path d="m12 15-5-5h10Z"/></svg>',ENTER:'<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24"><path d="m9 18-6-6 6-6 1.4 1.4L6.8 11H19V7h2v6H6.8l3.6 3.6Z"/></svg>',SHIFT:'<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24"><path d="M10.8796773,2.4676627 C10.7983669,2.53542133 10.7233714,2.61041687 10.6556128,2.69172724 L2.79065437,12.1296773 C2.17191723,12.8721619 2.27223434,13.9756501 3.01471891,14.5943872 L3.15432027,14.6993778 C3.44275103,14.8945506 3.78413686,15 4.13504161,15 L6.999,15 L7,20.25 C7,21.2164983 7.78350169,22 8.75,22 L15.25,22 L15.3935272,21.9941988 C16.2928897,21.9211923 17,21.1681734 17,20.25 L16.999,15 L19.8649584,15 C20.8314567,15 21.6149584,14.2164983 21.6149584,13.25 C21.6149584,12.8406111 21.47143,12.4441786 21.2093456,12.1296773 L13.3443872,2.69172724 C12.7600244,1.99049181 11.7432755,1.8620539 11.0066223,2.37118457 L10.8796773,2.4676627 Z M12.1920553,3.65200384 L20.0570137,13.0899539 C20.0944543,13.1348827 20.1149584,13.1915159 20.1149584,13.25 C20.1149584,13.3880712 20.0030296,13.5 19.8649584,13.5 L16.25,13.5 C15.8357864,13.5 15.5,13.8357864 15.5,14.25 L15.5,20.25 C15.5,20.3880712 15.3880712,20.5 15.25,20.5 L8.75,20.5 C8.61192881,20.5 8.5,20.3880712 8.5,20.25 L8.5,14.25 C8.5,13.8357864 8.16421356,13.5 7.75,13.5 L4.13504161,13.5 C4.07655749,13.5 4.01992426,13.4794959 3.97499551,13.4420553 C3.86892629,13.3536643 3.85459527,13.1960231 3.94298629,13.0899539 L11.8079447,3.65200384 C11.8176245,3.64038807 11.8283381,3.62967442 11.8399539,3.61999462 C11.9460231,3.5316036 12.1036643,3.54593461 12.1920553,3.65200384 Z"></path></svg>',BACKSPACE:'<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24"><path d="M18.75,4 C20.4830315,4 21.8992459,5.35645477 21.9948552,7.06557609 L22,7.25 L22,16.75 C22,18.4830315 20.6435452,19.8992459 18.9344239,19.9948552 L18.75,20 L10.2488122,20 C9.48467584,20 8.74731983,19.7308489 8.16441163,19.243553 L8.00936186,19.1052839 L3.01367221,14.3552839 C1.71288481,13.1184697 1.66102433,11.0613371 2.89783857,9.76054971 L3.01367221,9.64471607 L8.00936186,4.89471607 C8.56313355,4.36817906 9.28295917,4.05514987 10.0411712,4.00663485 L10.2488122,4 L18.75,4 Z M18.75,5.5 L10.2488122,5.5 C9.85605678,5.5 9.47644043,5.63205173 9.16975262,5.87226779 L9.04295431,5.98177019 L4.04726465,10.7317702 L3.98489269,10.7941421 C3.3580909,11.4533647 3.34595643,12.473346 3.93064574,13.1462921 L4.04726465,13.2682298 L9.04295431,18.0182298 C9.32758521,18.2888625 9.69368599,18.4547433 10.0814672,18.4919848 L10.2488122,18.5 L18.75,18.5 C19.6681734,18.5 20.4211923,17.7928897 20.4941988,16.8935272 L20.5,16.75 L20.5,7.25 C20.5,6.3318266 19.7928897,5.57880766 18.8935272,5.5058012 L18.75,5.5 Z M11.4462117,8.39705176 L11.5303301,8.46966991 L14.000116,10.939 L16.4696699,8.46966991 C16.7625631,8.1767767 17.2374369,8.1767767 17.5303301,8.46966991 C17.7965966,8.73593648 17.8208027,9.15260016 17.6029482,9.44621165 L17.5303301,9.53033009 L15.061116,12 L17.5303301,14.4696699 C17.8232233,14.7625631 17.8232233,15.2374369 17.5303301,15.5303301 C17.2640635,15.7965966 16.8473998,15.8208027 16.5537883,15.6029482 L16.4696699,15.5303301 L14.000116,13.061 L11.5303301,15.5303301 C11.2374369,15.8232233 10.7625631,15.8232233 10.4696699,15.5303301 C10.2034034,15.2640635 10.1791973,14.8473998 10.3970518,14.5537883 L10.4696699,14.4696699 L12.939116,12 L10.4696699,9.53033009 C10.1767767,9.23743687 10.1767767,8.76256313 10.4696699,8.46966991 C10.7359365,8.20340335 11.1526002,8.1791973 11.4462117,8.39705176 Z"></path></svg>',LANGUAGE:'<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24"><path d="M12 22q-2.05 0-3.875-.788-1.825-.787-3.187-2.15-1.363-1.362-2.15-3.187Q2 14.05 2 12q0-2.075.788-3.887.787-1.813 2.15-3.175Q6.3 3.575 8.125 2.787 9.95 2 12 2q2.075 0 3.887.787 1.813.788 3.175 2.151 1.363 1.362 2.15 3.175Q22 9.925 22 12q0 2.05-.788 3.875-.787 1.825-2.15 3.187-1.362 1.363-3.175 2.15Q14.075 22 12 22Zm0-2.05q.65-.9 1.125-1.875T13.9 16h-3.8q.3 1.1.775 2.075.475.975 1.125 1.875Zm-2.6-.4q-.45-.825-.787-1.713Q8.275 16.95 8.05 16H5.1q.725 1.25 1.812 2.175Q8 19.1 9.4 19.55Zm5.2 0q1.4-.45 2.487-1.375Q18.175 17.25 18.9 16h-2.95q-.225.95-.562 1.837-.338.888-.788 1.713ZM4.25 14h3.4q-.075-.5-.113-.988Q7.5 12.525 7.5 12t.037-1.012q.038-.488.113-.988h-3.4q-.125.5-.188.988Q4 11.475 4 12t.062 1.012q.063.488.188.988Zm5.4 0h4.7q.075-.5.113-.988.037-.487.037-1.012t-.037-1.012q-.038-.488-.113-.988h-4.7q-.075.5-.112.988Q9.5 11.475 9.5 12t.038 1.012q.037.488.112.988Zm6.7 0h3.4q.125-.5.188-.988Q20 12.525 20 12t-.062-1.012q-.063-.488-.188-.988h-3.4q.075.5.112.988.038.487.038 1.012t-.038 1.012q-.037.488-.112.988Zm-.4-6h2.95q-.725-1.25-1.813-2.175Q16 4.9 14.6 4.45q.45.825.788 1.712.337.888.562 1.838ZM10.1 8h3.8q-.3-1.1-.775-2.075Q12.65 4.95 12 4.05q-.65.9-1.125 1.875T10.1 8Zm-5 0h2.95q.225-.95.563-1.838.337-.887.787-1.712Q8 4.9 6.912 5.825 5.825 6.75 5.1 8Z"/></svg>',SPACE:" ",TAB:'<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24"><path d="m12 18-1.425-1.4 3.6-3.6H2v-2h12.175L10.6 7.4 12 6l6 6Zm8 0V6h2v12Z"/></svg>'};var vt={"{done}":n.DONE,"{shift}":n.SHIFT,"{backspace}":n.BACKSPACE,"{space}":n.SPACE,"{alphabetic}":"ABC","{numeric}":"123","{symbolic}":"#+="};var Ye={text_alphabetic:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["{shift}","z","x","c","v","b","n","m","{backspace}"],["{numeric}","{space}","{done}"]],text_shift:[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["{shift}","Z","X","C","V","B","N","M","{backspace}"],["{numeric}","{space}","{done}"]],text_numeric:[["1","2","3","4","5","6","7","8","9","0"],["-","/",":",";","(",")","$","&","@",'"'],["{symbolic}",".",",","?","!","'","{backspace}"],["{alphabetic}","{space}","{done}"]],text_symbolic:[["[","]","{","}","#","%","^","*","+","="],["_","\\","|","~","<",">","\u20AC","\xA3","\xA5","\u2022"],["{numeric}",".",",","?","!","'","{backspace}"],["{alphabetic}","{space}","{done}"]],search_alphabetic:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["{shift}","z","x","c","v","b","n","m","{backspace}"],["{numeric}","{space}","{done}"]],search_shift:[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["{shift}","Z","X","C","V","B","N","M","{backspace}"],["{numeric}","{space}","{done}"]],search_numeric:[["1","2","3","4","5","6","7","8","9","0"],["-","/",":",";","(",")","$","&","@",'"'],["{symbolic}",".",",","?","!","'","{backspace}"],["{alphabetic}","{space}","{done}"]],search_symbolic:[["[","]","{","}","#","%","^","*","+","="],["_","\\","|","~","<",">","\u20AC","\xA3","\xA5","\u2022"],["{numeric}",".",",","?","!","'","{backspace}"],["{alphabetic}","{space}","{done}"]],email_alphabetic:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["{shift}","z","x","c","v","b","n","m","{backspace}"],["{numeric}","@","{space}",".","{done}"]],email_shift:[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["{shift}","Z","X","C","V","B","N","M","{backspace}"],["{numeric}","@","{space}",".","{done}"]],email_numeric:[["1","2","3","4","5","6","7","8","9","0"],["$","!","~","&","=","#","[","]"],["{symbolic}",".","_","-","+","{backspace}"],["{alphabetic}","@","{space}",".","{done}"]],email_symbolic:[["`","|","{","}","?","%","^","*","/","'"],["$","!","~","&","=","#","[","]"],["{numeric}",".","_","-","+","{backspace}"],["{alphabetic}","@","{space}",".","{done}"]],url_alphabetic:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["{shift}","z","x","c","v","b","n","m","{backspace}"],["{numeric}","/",".com",".","{done}"]],url_shift:[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["{shift}","Z","X","C","V","B","N","M","{backspace}"],["{numeric}","/",".com",".","{done}"]],url_numeric:[["1","2","3","4","5","6","7","8","9","0"],["@","&","%","?",",","=","[","]"],["{symbolic}","_",":","-","+","{backspace}"],["{alphabetic}","/",".com",".","{done}"]],url_symbolic:[["1","2","3","4","5","6","7","8","9","0"],["*","$","#","!","'","^","[","]"],["{numeric}","~",";","(",")","{backspace}"],["{alphabetic}","/",".com",".","{done}"]],numeric_default:[["1","2","3"],["4","5","6"],["7","8","9"],["0","{backspace}"]],decimal_default:[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","{backspace}"]],tel_default:[["1","2","3","*"],["4","5","6","#"],["7","8","9","+"],["0","{backspace}"]]},Xe={"{done}":n.DONE,"{shift}":n.SHIFT,"{backspace}":n.BACKSPACE,"{space}":n.SPACE,"{alphabetic}":"ABC","{numeric}":"123","{symbolic}":"#+="},We={code:"en-US",dir:"ltr",layouts:Ye,display:Xe};var xt={"{done}":n.DONE,"{backspace}":n.BACKSPACE,"{space}":n.SPACE,"{alphabetic}":"\u0627\u200C\u0628\u200C\u067E","{numeric}":"\u06F1\u06F2\u06F3","{symbolic}":"=+#"};var Ct={"{done}":n.DONE,"{backspace}":n.BACKSPACE,"{space}":n.SPACE,"{alphabetic}":"\u05D0\u05D1\u05D2","{numeric}":"123","{symbolic}":"=+#"};var wt={"{done}":n.DONE,"{shift}":n.SHIFT,"{backspace}":n.BACKSPACE,"{space}":n.SPACE,"{alphabetic}":"\u10D0\u10D1\u10D2","{numeric}":"123","{symbolic}":"#+="};var Et={"{done}":n.DONE,"{shift}":n.SHIFT,"{backspace}":n.BACKSPACE,"{space}":n.SPACE,"{alphabetic}":"\u0410\u0411\u0412","{numeric}":"123","{symbolic}":"#+="};var St={"{done}":n.DONE,"{shift}":n.SHIFT,"{backspace}":n.BACKSPACE,"{space}":n.SPACE,"{alphabetic}":"ABC","{numeric}":"123","{symbolic}":"#+="};var Je=new O("NGX_TOUCH_KEYBOARD_LOCALE",{providedIn:"root",factory:et});function et(){return We}var tt=(()=>{class o{constructor(){this._sanitizer=p(ae),this._elementRef=p(C),this._defaultLocale=p(Je),this.locale=this._defaultLocale,this.layoutMode="text",this.layoutName="alphabetic",this.debug=!1,this.closePanel=q(),this._activeButtonClass="active",this._caretPosition=null,this._caretPositionEnd=null,this.isStandardButton=e=>e&&!(e[0]==="{"&&e[e.length-1]==="}")}get maxLength(){return this._activeInputElement?.maxLength??-1}get isTextarea(){return this._activeInputElement?.type==="textarea"}handleKeyUp(e){e.isTrusted&&(this._caretEventHandler(e),this._handleHighlightKeyUp(e))}handleKeyDown(e){e.isTrusted&&this._handleHighlightKeyDown(e)}handleMouseUp(e){this._caretEventHandler(e)}handleSelect(e){this._caretEventHandler(e)}handleSelectionChange(e){this._caretEventHandler(e)}setLocale(e=this._defaultLocale){if(!(e&&e.layouts))throw new Error("Locale is not defined");this.locale=e}setActiveInput(e){this._activeInputElement=e;let t=this._activeInputElement?.inputMode;t&&["text","search","email","url","numeric","decimal","tel"].some(i=>i===t)?this.layoutMode=t:this.layoutMode="text",t&&["numeric","decimal","tel"].some(i=>i===t)?this.layoutName="default":this.layoutName="alphabetic",this.debug&&(console.log("Locale:",`${this.locale.code}`),console.log("Layout:",`${this.layoutMode}_${this.layoutName}`)),this._setCaretPosition(this._activeInputElement.selectionStart,this._activeInputElement.selectionEnd),this.debug&&console.log("Caret start at:",this._caretPosition,this._caretPositionEnd),this._focusActiveInput()}getButtonType(e){return this.isStandardButton(e)?"standard-key":"function-key"}getButtonClass(e){let t=this.getButtonType(e),i=e.replace("{","").replace("}",""),a="";return t!=="standard-key"&&(a=`${i}-key`),`${t} ${a}`}getButtonDisplayName(e){return this._sanitizer.bypassSecurityTrustHtml(this.locale.display[e]||e)}handleButtonPress(e,t){if(this.debug&&console.log("Key press:",e),e===g.SHIFT){this.layoutName=this.layoutName==="alphabetic"?"shift":"alphabetic";return}else if(e===g.DONE){this.closePanel.emit();return}let i=[this._caretPosition||0,this._caretPositionEnd||0,!0],a=this._activeInputElement?.value||"";if(this.isStandardButton(e))a=this._addStringAt(a,e,...i);else if(e===g.BACKSPACE)a=this._removeAt(a,...i);else if(e===g.SPACE)a=this._addStringAt(a," ",...i);else if(e===g.TAB)a=this._addStringAt(a,"	",...i);else if(e===g.ENTER)this.isTextarea&&(a=this._addStringAt(a,`
`,...i));else{this.layoutName=e.substring(1,e.length-1);return}this._activeInputElement&&(this._activeInputElement.value=a,this.debug&&console.log("Caret at:",this._caretPosition,this._caretPositionEnd,"Button",t)),this._dispatchEvents(e)}handleButtonDown(e,t){this.debug&&console.log("Key down:",e),t&&(t.preventDefault(),t.stopPropagation()),this._setActiveButton(e),this._holdInteractionTimeout&&clearTimeout(this._holdInteractionTimeout),this._holdTimeout&&clearTimeout(this._holdTimeout),this._isMouseHold=!0,this._holdTimeout=window.setTimeout(()=>{this._isMouseHold&&(!e.includes("{")&&!e.includes("}")||e===g.BACKSPACE||e===g.SPACE)&&(this.debug&&console.log("Button hold:",e),this.handleButtonHold(e)),clearTimeout(this._holdTimeout)},500),this.handleButtonPress(e,t)}handleButtonUp(e,t){this.debug&&console.log("Key up:",e),t&&(t.preventDefault(),t.stopPropagation()),this._removeActiveButton(),this._isMouseHold=!1,this._holdInteractionTimeout&&clearTimeout(this._holdInteractionTimeout)}handleButtonHold(e){this._holdInteractionTimeout&&clearTimeout(this._holdInteractionTimeout),this._holdInteractionTimeout=window.setTimeout(()=>{this._isMouseHold?(this.handleButtonPress(e),this.handleButtonHold(e)):clearTimeout(this._holdInteractionTimeout)},100)}_setCaretPosition(e,t=e){this._caretPosition=e,this._caretPositionEnd=t}_updateCaretPos(e,t=!1){let i=this._updateCaretPosAction(e,t);this._setCaretPosition(i),setTimeout(()=>{this._activeInputElement?.scrollTo({top:this._activeInputElement.scrollHeight})})}_updateCaretPosAction(e,t=!1){let i=this._caretPosition;return i!=null&&(t?i>0&&(i=i-e):i=i+e),i}_removeAt(e,t=e.length,i=e.length,a=!1){if(t===0&&i===0)return e;let c;if(t===i){let y,w,F=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;t&&t>=0?(y=e.substring(t-2,t),w=y.match(F),w?(c=e.substr(0,t-2)+e.substr(t),a&&this._updateCaretPos(2,!0)):(c=e.substr(0,t-1)+e.substr(t),a&&this._updateCaretPos(1,!0))):(y=e.slice(-2),w=y.match(F),w?(c=e.slice(0,-2),a&&this._updateCaretPos(2,!0)):(c=e.slice(0,-1),a&&this._updateCaretPos(1,!0)))}else c=e.slice(0,t)+e.slice(i),a&&this._setCaretPosition(t);return c}_addStringAt(e,t,i=e.length,a=e.length,c=!1){if(this.maxLength!==-1&&e.length>=this.maxLength)return e;let y;return!i&&i!==0?y=e+t:(y=[e.slice(0,i),t,e.slice(a)].join(""),c&&this._updateCaretPos(t.length,!1)),y}_dispatchEvents(e){let t,i;e.includes("{")&&e.includes("}")?(t=e.slice(1,e.length-1).toLowerCase(),t=t.charAt(0).toUpperCase()+t.slice(1),i=t):(t=e,i=Number.isInteger(Number(e))?`Digit${e}`:`Key${e.toUpperCase()}`);let a={bubbles:!0,cancelable:!0,shiftKey:this.layoutName=="shift",key:t,code:i,location:0};this._activeInputElement?.dispatchEvent(new KeyboardEvent("keydown",a)),this._activeInputElement?.dispatchEvent(new KeyboardEvent("keypress",a)),this._activeInputElement?.dispatchEvent(new Event("input",{bubbles:!0})),this._activeInputElement?.dispatchEvent(new KeyboardEvent("keyup",a)),this._focusActiveInput()}_caretEventHandler(e){let t="";e.target.tagName&&(t=e.target.tagName.toLowerCase());let i=t==="textarea"||t==="input"&&["text","search","email","password","url","tel"].includes(e.target.type),a=e.target===this._elementRef.nativeElement||e.target&&this._elementRef.nativeElement.contains(e.target);if(i&&this._activeInputElement==e.target)this._setCaretPosition(e.target.selectionStart,e.target.selectionEnd),this.debug&&console.log("Caret at:",this._caretPosition,this._caretPositionEnd,e&&e.target.tagName.toLowerCase(),e);else if(e.type==="pointerup"&&this._activeInputElement===document.activeElement){this._isMouseHold&&this.handleButtonUp("");return}else!a&&e?.type!=="selectionchange"&&(this._setCaretPosition(null),this.debug&&console.log(`Caret position reset due to "${e?.type}" event`,e),this.closePanel.emit())}_focusActiveInput(){this._activeInputElement?.focus(),this._activeInputElement?.setSelectionRange(this._caretPosition,this._caretPositionEnd)}_handleHighlightKeyDown(e){let t=this._getKeyboardLayoutKey(e);this._setActiveButton(t)}_handleHighlightKeyUp(e){let t=this._getKeyboardLayoutKey(e);this._removeActiveButton(t)}_getKeyboardLayoutKey(e){let t="",i=e.code||e.key;return i?.includes("Space")||i?.includes("Numpad")||i?.includes("Backspace")||i?.includes("CapsLock")||i?.includes("Meta")?t=`{${e.code}}`||"":i?.includes("Control")||i?.includes("Shift")||i?.includes("Alt")?t=`{${e.key}}`||"":t=e.key||"",t.length>1?t?.toLowerCase():t}_setActiveButton(e){let t=this._elementRef.nativeElement.getElementsByTagName("button").namedItem(e);t&&t.classList&&t.classList.add(this._activeButtonClass)}_removeActiveButton(e){let t=this._elementRef.nativeElement.getElementsByTagName("button");if(e){let i=t.namedItem(e);i&&i.classList&&i.classList.remove(this._activeButtonClass)}else for(let i=0;i<t.length;i++)t[i].classList.remove(this._activeButtonClass)}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=E({type:o,selectors:[["ngx-touch-keyboard"]],hostBindings:function(t,i){t&1&&k("keyup",function(c){return i.handleKeyUp(c)},!1,v)("keydown",function(c){return i.handleKeyDown(c)},!1,v)("pointerup",function(c){return i.handleMouseUp(c)},!1,v)("select",function(c){return i.handleSelect(c)},!1,v)("selectionchange",function(c){return i.handleSelectionChange(c)},!1,v)},outputs:{closePanel:"closePanel"},standalone:!1,decls:3,vars:1,consts:[[1,"touch-keyboard",3,"ngClass"],[1,"touch-keyboard-row"],[1,"touch-keyboard-key",3,"name","dir","ngClass","innerHtml"],[1,"touch-keyboard-key",3,"pointerup","pointerdown","pointercancel","name","dir","ngClass","innerHtml"]],template:function(t,i){t&1&&(r(0,"div",0),A(1,je,3,0,"div",1,Qe),l()),t&2&&(h("ngClass","layout-"+i.layoutMode+"-"+i.layoutName),s(),B(i.locale.layouts[i.layoutMode+"_"+i.layoutName]))},dependencies:[ie,se],styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed;z-index:1000}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:flex;max-width:100%;max-height:100%}.cdk-overlay-backdrop{position:absolute;inset:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:1}.cdk-high-contrast-active .cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:.6}.cdk-overlay-dark-backdrop{background:#00000052}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}:root{--tk-color-text: #27272a;--tk-background: rgba(238, 238, 238, .87);--tk-background-button: rgba(255, 255, 255, .96);--tk-background-button-fn: rgba(255, 255, 255, .5);--tk-background-button-active: rgba(0, 0, 0, .04)}.dark{--tk-color-text: #ffffff;--tk-background: rgba(33, 33, 33, .87);--tk-background-button: rgba(66, 66, 66, .96);--tk-background-button-fn: rgba(66, 66, 66, .5);--tk-background-button-active: rgba(255, 255, 255, .2)}ngx-touch-keyboard{width:100%;padding:.25rem .25rem .375rem;border-radius:.375rem;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;justify-content:center;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);background:var(--tk-background);box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.ngx-touch-keyboard-fullScreen>ngx-touch-keyboard{border-radius:0}.touch-keyboard{flex:1 1 auto;max-width:840px}.touch-keyboard .touch-keyboard-row{display:flex;flex-direction:row}.touch-keyboard .touch-keyboard-row:not(:last-child){margin-bottom:.25rem}.touch-keyboard .touch-keyboard-key{width:20px;box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;text-align:center;margin:0;line-height:32px;padding:.25rem;border-radius:.375rem;font-size:14px;font-weight:500;display:flex;flex-grow:1;align-items:center;justify-content:center;color:var(--tk-color-text);background-color:var(--tk-background-button);box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.touch-keyboard .touch-keyboard-key>svg{fill:var(--tk-color-text)}.touch-keyboard .touch-keyboard-key.function-key:not(.space-key){background-color:var(--tk-background-button-fn)}.touch-keyboard .touch-keyboard-key.active{background-color:var(--tk-background-button-active)!important}.touch-keyboard .touch-keyboard-key.alphabetic-key,.touch-keyboard .touch-keyboard-key.backspace-key,.touch-keyboard .touch-keyboard-key.shift-key,.touch-keyboard .touch-keyboard-key.numeric-key,.touch-keyboard .touch-keyboard-key.symbolic-key,.touch-keyboard .touch-keyboard-key.language-key,.touch-keyboard .touch-keyboard-key.enter-key,.touch-keyboard .touch-keyboard-key.done-key{max-width:4rem}.touch-keyboard .touch-keyboard-key.space-key{min-width:40%}.touch-keyboard .touch-keyboard-key[data-layout=numeric],.touch-keyboard .touch-keyboard-key[data-layout=decimal],.touch-keyboard .touch-keyboard-key[data-layout=tel]{width:33%!important;max-width:none!important}.touch-keyboard .touch-keyboard-key:not(:last-child){margin-right:.25rem}@media (min-width: 600px){.touch-keyboard .touch-keyboard-key.alphabetic-key,.touch-keyboard .touch-keyboard-key.backspace-key,.touch-keyboard .touch-keyboard-key.shift-key,.touch-keyboard .touch-keyboard-key.numeric-key,.touch-keyboard .touch-keyboard-key.symbolic-key,.touch-keyboard .touch-keyboard-key.language-key,.touch-keyboard .touch-keyboard-key.enter-key,.touch-keyboard .touch-keyboard-key.done-key{max-width:6rem}}
`],encapsulation:2,changeDetection:0})}}return o})();var qe=(()=>{class o{constructor(){this._overlay=p(fe),this._elementRef=p(C),this.open=z(!1,{alias:"ngxTouchKeyboardOpen"}),this.locale=x(void 0,{alias:"ngxTouchKeyboardLocale"}),this.debugMode=x(!1,{alias:"ngxTouchKeyboardDebug",transform:N}),this.fullScreenMode=x(!1,{alias:"ngxTouchKeyboardFullScreen",transform:N}),this.origin=x(null,{alias:"ngxConnectedTouchKeyboardOrigin"}),te(()=>{this.open()?this.openPanel():this.closePanel()})}ngOnDestroy(){this._overlayRef&&this._overlayRef.dispose()}openPanel(){this._overlayRef?.hasAttached()||(this._overlayRef||this._createOverlay(),this.fullScreenMode()?this._overlayRef.addPanelClass("ngx-touch-keyboard-fullScreen"):this._overlayRef.removePanelClass("ngx-touch-keyboard-fullScreen"),this._overlayRef.updatePositionStrategy(this._getPositionStrategy(this.fullScreenMode())),this._overlayRef.updateSize(this._getOverlaySize(this.fullScreenMode())),this._panelRef=this._overlayRef.attach(new re(tt)),this._panelRef.instance.debug=this.debugMode(),this._panelRef.instance.setLocale(this.locale()),this._panelRef.instance.setActiveInput(this._elementRef.nativeElement),this._panelRef.instance.closePanel.subscribe(()=>this.closePanel()),this.open.set(!0))}closePanel(){this._overlayRef?.detach(),this.open.set(!1)}togglePanel(){this.open()?this.closePanel():this.openPanel()}_createOverlay(){this._overlayRef=this._overlay.create({direction:"ltr",hasBackdrop:!1,panelClass:"ngx-touch-keyboard-overlay-pane",scrollStrategy:this._overlay.scrollStrategies.noop()})}_getPositionStrategy(e){return e?this._overlay.position().global().centerHorizontally().bottom("0"):this._overlay.position().flexibleConnectedTo(this._getOriginElement()).withLockedPosition().withPush().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}_getOverlaySize(e){return e?{width:"100%",maxWidth:"100%",minWidth:"100%"}:{width:this._getOriginElement().getBoundingClientRect().width,maxWidth:this._getOriginElement().getBoundingClientRect().width,minWidth:"260px"}}_getOriginElement(){if(this.origin())return this.origin()?.elementRef.nativeElement;let e=this._elementRef.nativeElement;return e.classList.contains("mat-input-element")?e.parentNode?.parentNode:e.classList.contains("mat-mdc-input-element")?e.parentNode?.parentNode?.parentNode:e}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275dir=Q({type:o,selectors:[["input","ngxTouchKeyboard",""],["textarea","ngxTouchKeyboard",""]],inputs:{open:[1,"ngxTouchKeyboardOpen","open"],locale:[1,"ngxTouchKeyboardLocale","locale"],debugMode:[1,"ngxTouchKeyboardDebug","debugMode"],fullScreenMode:[1,"ngxTouchKeyboardFullScreen","fullScreenMode"],origin:[1,"ngxConnectedTouchKeyboardOrigin","origin"]},outputs:{open:"ngxTouchKeyboardOpenChange"},exportAs:["ngxTouchKeyboard"],standalone:!1})}}return o})(),Ue=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=Z({type:o})}static{this.\u0275inj=H({imports:[le,_e]})}}return o})();var at=["signInNgForm"],ot=()=>["/sign-up"],nt=()=>["/forgot-password"];function ct(o,m){if(o&1&&(r(0,"msk-alert",11),d(1),l()),o&2){let e=b(2);h("appearance","outline")("showIcon",!1)("type",e.alert().type)("@shake",e.alert().type==="error"),s(),u(" ",e.alert().message," ")}}function st(o,m){if(o&1){let e=I();r(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),S(4,"img",7),l(),r(5,"div",8),d(6),l(),r(7,"div",9)(8,"span"),d(9),l(),r(10,"a",10),d(11),l()(),P(12,ct,2,5,"msk-alert",11),r(13,"form",12,0)(15,"mat-form-field",13)(16,"mat-label"),d(17),l(),S(18,"input",14),r(19,"mat-error"),d(20),l()(),r(21,"mat-form-field",13)(22,"mat-label"),d(23),l(),S(24,"input",15,1),r(27,"div",16)(28,"button",17),k("click",function(){f(e);let i=T(26);return _(i.type==="password"?i.type="text":i.type="password")}),r(29,"mat-icon",18),d(30),l()(),r(31,"button",17),k("click",function(){f(e);let i=T(25);return _(i.togglePanel())}),r(32,"mat-icon",18),d(33,"keyboard"),l()()(),r(34,"mat-error"),d(35),l()(),r(36,"div",19)(37,"mat-checkbox",20),d(38),l(),r(39,"a",21),d(40),l()(),r(41,"button",22),k("click",function(){f(e);let i=b();return _(i.signIn())}),d(42),l()()()()()}if(o&2){let e=m.$implicit,t=T(26),i=b();s(6),u(" ",e("signIn.sign-in")," "),s(3),u(" ",e("signIn.do-not-have-an-account")," "),s(),h("routerLink",M(19,ot)),s(),u(" ",e("signIn.sign-up")," "),s(),j(i.showAlert()?12:-1),s(),h("formGroup",i.signInForm),s(4),u(" ",e("signIn.username")," "),s(3),u(" ",e("error-validation.required")," "),s(3),u(" ",e("signIn.password")," "),s(5),h("disabled",t.disabled),s(2),u(" ",t.type==="password"?"visibility":"visibility_off"," "),s(),h("disabled",t.disabled),s(4),u(" ",e("error-validation.required")," "),s(3),u(" ",e("signIn.remember-me")," "),s(),h("routerLink",M(20,nt)),s(),u(" ",e("signIn.forgot-password")," "),s(),h("disabled",i.signInForm.disabled)("mskSpinner",i.signInForm.disabled),s(),u(" ",i.signInForm.enabled?e("signIn.sign-in"):""," ")}}var Ve=(()=>{class o{constructor(){this._router=p(ne),this._elementRef=p(C),this._formBuilder=p(Le),this._activatedRoute=p(oe),this._changeDetectorRef=p(ee),this._authService=p(Fe),this.signInNgForm=V.required("signInNgForm"),this.showAlert=L(!1),this.alert=L({type:"error",message:""})}ngOnInit(){this.signInForm=this._formBuilder.group({username:["",K.required],password:["",K.required],rememberMe:!1}),setTimeout(()=>this.usernameFocus(),100)}signIn(){this.signInForm.invalid||(this.signInForm.disable(),this.showAlert.set(!1),this._authService.signIn(this.signInForm.value).pipe($(e=>{let t=this._activatedRoute.snapshot.queryParamMap.get("redirectURL")||"/signed-in-redirect";e.requiresTwoFactor?this._router.navigate(["/two-step-verification"],{queryParams:{redirectURL:t}}):this._router.navigateByUrl(t)}),R(e=>{throw this.signInForm.enable(),this.signInForm.reset({rememberMe:!1}),this.alert.set({type:"error",message:e.error.message}),this.showAlert.set(!0),setTimeout(()=>this.usernameFocus()),e})).subscribe())}usernameFocus(){this._elementRef.nativeElement.querySelector('[formcontrolname="username"]')?.focus(),this._changeDetectorRef.markForCheck()}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=E({type:o,selectors:[["main-sign-in"]],viewQuery:function(t,i){t&1&&X(i.signInNgForm,at,5),t&2&&W()},decls:1,vars:0,consts:[["signInNgForm","ngForm"],["passwordVirtualKeyboard","ngxTouchKeyboard","passwordField",""],["class","flex min-w-0 flex-auto flex-col items-center justify-center",4,"transloco"],[1,"flex","min-w-0","flex-auto","flex-col","items-center","justify-center"],[1,"sm:shadow-level-1","sm:rounded-medium","sm:bg-surface-container-low","w-full","px-4","py-8","sm:w-auto","sm:p-12"],[1,"max-w-80","mx-auto","w-full","sm:mx-0","sm:w-80"],[1,"w-12"],["src","assets/images/logo/logo.svg","alt","logo"],[1,"text-headline-medium","mt-8","font-extrabold"],[1,"mt-0.5","flex","items-baseline","font-medium"],[1,"text-primary","ms-1","hover:underline",3,"routerLink"],[1,"mt-8",3,"appearance","showIcon","type"],[1,"mt-6",3,"formGroup"],[1,"mt-2","w-full"],["id","username","matInput","","formControlName","username"],["id","password","matInput","","type","password","formControlName","password","ngxTouchKeyboard",""],["matSuffix",""],["type","button","mat-icon-button","",3,"click","disabled"],[1,"icon-size-5"],[1,"mt-2","inline-flex","w-full","items-center","justify-between"],["formControlName","rememberMe"],[1,"text-label-medium","text-primary","hover:underline","focus:underline",3,"routerLink"],["mat-flat-button","",1,"mt-6","w-full",3,"click","disabled","mskSpinner"]],template:function(t,i){t&1&&P(0,st,43,21,"div",2)},dependencies:[ce,Pe,Se,Ce,we,Ee,Ae,Ie,Te,be,me,he,$e,De,xe,ge,ke,ve,ue,pe,de,He,Re,Be,Ue,qe,Ne,Oe],encapsulation:2,data:{animation:Me},changeDetection:0})}}return o})();var rt=D({"./i18n/en.json":()=>import("./chunk-Y3PRJ6A2.js"),"./i18n/fa.json":()=>import("./chunk-U64UWEWZ.js")});var ai=[{path:"",component:Ve,providers:[ye({scope:"signIn",loader:Ke((o,m)=>rt(`./${m}/${o}.json`))})]}];export{Ve as SignInComponent,ai as routes};
