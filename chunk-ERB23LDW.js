import{b as Ae,c as ke,d as Ee,e as Me,f as be,g as O,h as Ie,i as dt,j as Te,k as we,l as Fe,m as Re,n as $e,o as Ne,p as Be,q as Ve,r as Oe}from"./chunk-IHQALA6F.js";import{a as Le}from"./chunk-HSTAYPDS.js";import{c as De}from"./chunk-CXAMLLJO.js";import{b as ye,c as pt}from"./chunk-XETUAHZC.js";import{ca as ie,ha as he}from"./chunk-KVJPCLDQ.js";import{a as ge,b as xe,c as Ce,h as Se}from"./chunk-SIUYHYWA.js";import"./chunk-I3ROGWBB.js";import{c as ve}from"./chunk-FMTLDRPV.js";import{a as le}from"./chunk-NBWB5455.js";import{a as re,b as B,c as ce,e as se}from"./chunk-XPE6A4UF.js";import{b as Jt,c as W,d as J,e as Kt}from"./chunk-KDKCNII2.js";import{a as E}from"./chunk-K3OUCCZ6.js";import{a as me,b as et}from"./chunk-I234HARX.js";import{a as ue,b as fe,c as _e,d as mt}from"./chunk-BGJ7BR5O.js";import{A as st,B as lt,a as Xt,b as Zt,c as te,g as ee,h as X,j as it,l as M,n as nt,o as ot,p as pe,r as Dt,t as at,u as rt,w as ct,z as de}from"./chunk-OHW5GPCH.js";import"./chunk-ZVCJ7HI5.js";import"./chunk-QEB7RJPV.js";import{k as tt}from"./chunk-OI4AFYXP.js";import"./chunk-GLXDHTOZ.js";import{V as K,W as Y,Z as Yt,da as L,ea as N,fa as ne,ga as oe,ha as ae,ia as Z}from"./chunk-EGV4WSDU.js";import"./chunk-TCYW2OPJ.js";import{b as Wt}from"./chunk-LUR2K6FW.js";import{k as Qt,n as $,p as Ut,q as H,s as Ht}from"./chunk-2BJKMOKI.js";import{Aa as z,B as Tt,Bc as A,Cb as f,Cc as R,D as wt,Dc as yt,Ec as V,F as k,Fa as Lt,Ga as G,Gb as d,Ma as Nt,Mb as y,N as Ft,Nb as Ct,Ob as T,Pb as w,Pc as U,Qb as r,Rb as o,Sb as h,Sc as qt,Tb as Vt,Ub as Ot,Vb as jt,Wb as q,Z as Rt,aa as S,bc as Q,da as $t,dc as m,g as ht,ib as n,ja as p,k as gt,lc as St,m as Mt,mc as Pt,n as bt,nc as F,oa as g,oc as c,pc as l,qc as v,r as _,tb as Bt,ub as xt,uc as zt,wc as x,x as It,xc as Gt,yc as C,za as P}from"./chunk-3NJGGVEI.js";import{a as vt,c as Et}from"./chunk-2R6CW7ES.js";var je=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=g({type:e,selectors:[["main-accounts"]],standalone:!0,features:[x],decls:1,vars:0,template:function(i,s){i&1&&h(0,"router-outlet")},dependencies:[W],encapsulation:2,changeDetection:0})}}return e})();var ut="code",ft="asc",D=class{constructor(a){this.id=a.id,this.code=a.code,this.accountTypeId=a.accountTypeId,this.accountTypeName=a.accountTypeName,this.createDate=new Date(a.createDate),this.closeDate=a.closeDate?new Date(a.closeDate):void 0,this.balance=a.balance,this.persons=a.persons?.map(t=>new At(t)),this.note=a.note,this.isActive=a.isActive}get fullName(){return this.accountTypeName+" "+this.persons.map(a=>a.name).join("/")}},At=class{constructor(a){this.id=a.id,this.code=a.code,this.name=a.name}};var b=(()=>{class e{constructor(){this._appConfig=p(le),this._httpClient=p(Wt),this._pagination=new ht(null),this._accounts=new ht(null)}get pagination$(){return this._pagination.asObservable()}get _accounts$(){return this._accounts.asObservable()}getAccounts(t=1,i=10,s=`${ut} ${ft}`){return this._httpClient.get(`${this._appConfig.apiEndpoint}/api/account/all`,{params:{page:t,pageSize:i,sortBy:s}}).pipe(_(u=>({pagination:new ke(u),items:u.items.map(I=>new D(I))})),S(u=>{this._pagination.next(u.pagination),this._accounts.next(u.items)}))}getLookupAccounts(){return this._httpClient.get(`${this._appConfig.apiEndpoint}/api/account/lookup`).pipe(_(t=>t))}getLookupAccountTypes(){return this._httpClient.get(`${this._appConfig.apiEndpoint}/api/accountType/lookup`).pipe(_(t=>t))}getAccount(t){return this._httpClient.get(`${this._appConfig.apiEndpoint}/api/account/${t}`).pipe(_(i=>new D(i)))}getBalanceAccount(t){return this._httpClient.get(`${this._appConfig.apiEndpoint}/api/account/${t}/balance`).pipe(_(i=>i))}getAccountWithBalance(t){return It([this.getAccount(t),this.getBalanceAccount(t)]).pipe(_(i=>new D(vt(vt({},i[0]),i[1]))))}createAccount(t){return this._httpClient.post(`${this._appConfig.apiEndpoint}/api/account`,t).pipe(_(i=>new D(i)))}updateAccount(t){return this._httpClient.put(`${this._appConfig.apiEndpoint}/api/account`,t).pipe(_(i=>new D(i)),S(i=>{if(this._accounts.value){let s=this._accounts.value.findIndex(u=>u.id===i.id)??0;this._accounts.value[s]=i,this._accounts.next(this._accounts.value)}}))}closeAccount(t){return this._httpClient.put(`${this._appConfig.apiEndpoint}/api/account/close`,t).pipe(_(i=>new D(i)),S(i=>{if(this._accounts.value){let s=this._accounts.value.findIndex(u=>u.id===i.id)??0;this._accounts.value[s]=i,this._accounts.next(this._accounts.value)}}))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=$t({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ue=e=>[e];function He(e,a){if(e&1&&(Vt(0),r(1,"mat-icon",1),c(2),o(),Ot()),e&2){let t=a.$implicit,i=m();n(),d("ngClass",C(3,Ue,i.value()?"text-green-400":"text-red-400"))("matTooltip",i.value()?t("active"):t("inactive")),n(),v(" ",i.value()?"check_circle":"cancel"," ")}}var ze=(()=>{class e{constructor(){this.value=Nt(!0,{transform:qt})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=g({type:e,selectors:[["main-accounts-status"]],inputs:{value:[1,"value"]},standalone:!0,features:[x],decls:1,vars:0,consts:[[4,"transloco"],[1,"text-green-400",3,"ngClass","matTooltip"]],template:function(i,s){i&1&&f(0,He,3,5,"ng-container",0)},dependencies:[$,N,L,et,me,B],styles:[`main-accounts-status{display:flex}
`],encapsulation:2,changeDetection:0})}}return e})();var Ye=(e,a)=>a.id,Xe=()=>["card","new"],Ze=e=>({"mat-mdc-extended-fab-collapses":e}),ti=e=>["card","view",e];function ei(e,a){if(e&1&&(r(0,"div",11)(1,"form",12)(2,"div",13)(3,"mat-icon"),c(4,"search"),o(),h(5,"input",14),o()()()),e&2){let t=a.$implicit,i=m();n(),d("formGroup",i.filterForm),n(4),d("placeholder",t("accounts.search"))}}function ii(e,a){if(e&1&&(r(0,"div",20)(1,"div",21),c(2),o(),r(3,"div",22)(4,"span"),c(5),o()()()),e&2){let t=m().$implicit;n(2),v(" ",t.fullName," "),n(3),v("#",t.code,"")}}function ni(e,a){if(e&1&&(r(0,"div",4)(1,"div",15),h(2,"msk-avatar",16),o(),f(3,ii,6,2,"div",17),r(4,"div",18),h(5,"main-accounts-status",19),o()()),e&2){let t=a.$implicit;d("routerLink",C(4,ti,t.id)),n(2),d("name",t.persons[0].name),n(),d("translocoRead","accounts.details"),n(2),d("value",t.isActive)}}function oi(e,a){if(e&1&&(r(0,"div",5),c(1),o()),e&2){let t=a.$implicit;n(),v(" ",t("accounts.empty-list")," ")}}function ai(e,a){e&1&&f(0,oi,2,1,"div",23)}function ri(e,a){if(e&1&&(r(0,"span"),c(1),o()),e&2){let t=a.$implicit;n(),l(t("new"))}}var _t=(()=>{class e{constructor(){this._destroyRef=p(G),this._accountService=p(b),this._changeDetectorRef=p(U),this._gridContent=xt.required(tt),this._paginator=xt.required(O),this._sort=new Me,this.isLoading=!1,this.isFabCollapses=!1,this.lastOffsetScroll=0,this.pageSizeOptions=Ae,this.filterForm=new pe({search:new Dt(""),isActive:new Dt(null)})}ngOnInit(){this._accountService.pagination$.pipe(E(this._destroyRef),wt(t=>!!t)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.accounts$=this._accountService._accounts$}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:ut,start:ft,disableClear:!0}),this._sort.sortChange.pipe(E(this._destroyRef),S(()=>this._paginator().pageIndex=0)).subscribe(),Tt(this._sort.sortChange,this._paginator().page).pipe(E(this._destroyRef),Rt(()=>this.getAccounts())).subscribe()),this._gridContent().elementScrolled().pipe(E(this._destroyRef),_(t=>t.target.scrollTop||0),S(t=>{let i=t>10?this.lastOffsetScroll<t:!1;this.isFabCollapses!==i&&(this.isFabCollapses=i,this._changeDetectorRef.markForCheck()),this.lastOffsetScroll=t})).subscribe()}getAccounts(t=!1){return this.isLoading=!0,this._changeDetectorRef.markForCheck(),this._accountService.getAccounts(t?1:this._paginator().pageIndex+1,this._paginator().pageSize,`${this._sort.active} ${this._sort.direction}`).pipe(k(i=>Mt()),Ft(()=>{this.isLoading=!1,this._changeDetectorRef.markForCheck()}))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=g({type:e,selectors:[["main-accounts-list"]],viewQuery:function(i,s){i&1&&(St(s._gridContent,tt,5),St(s._paginator,O,5)),i&2&&Pt(2)},standalone:!0,features:[x],decls:16,vars:15,consts:[[1,"page-layout","grid-scroll"],["class","header",4,"transloco"],[1,"content"],["cdkScrollable","",1,"content-grid"],["matRipple","",1,"content-grid-item","tow-line",3,"routerLink"],[1,"text-secondary","p-8","text-center","text-xl","font-semibold","tracking-tight","sm:p-16"],[1,"content-fab-container"],["mat-fab","","extended","",3,"routerLink","ngClass"],[4,"transloco"],[1,"content-paginator",3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","disabled"],[1,"pointer-events-none","invisible","absolute","h-0","w-0","opacity-0"],[1,"header"],[1,"flex","w-full","items-center",3,"formGroup"],[1,"msk-mat-search-bar","w-full"],["formControlName","search","autocomplete","off",3,"placeholder"],[1,"content-grid-item-avatar"],[3,"name"],["class","content-grid-item-content",4,"transloco","translocoRead"],[1,"content-grid-item-end"],[3,"value"],[1,"content-grid-item-content"],[1,"truncate"],[1,"flex","items-center","gap-2","truncate"],["class","text-secondary p-8 text-center text-xl font-semibold tracking-tight sm:p-16",4,"transloco"]],template:function(i,s){i&1&&(r(0,"div",0),f(1,ei,6,2,"div",1),r(2,"div",2)(3,"div",3),T(4,ni,6,6,"div",4,Ye,!1,ai,1,0,"div",5),A(7,"async"),o(),r(8,"div",6)(9,"button",7)(10,"mat-icon"),c(11,"add"),o(),f(12,ri,2,1,"span",8),o()(),h(13,"mat-paginator",9),o()(),r(14,"div",10),h(15,"router-outlet"),o()),i&2&&(n(4),w(R(7,10,s.accounts$)),n(5),d("routerLink",Gt(12,Xe))("ngClass",C(13,Ze,s.isFabCollapses))("@zoomIn",void 0),n(4),d("length",s.pagination.total)("pageIndex",s.pagination.pageIndex)("pageSize",s.pagination.pageSize)("pageSizeOptions",s.pageSizeOptions)("showFirstLastButtons",!0)("disabled",s.isLoading))},dependencies:[H,$,st,at,it,nt,ot,lt,rt,ct,Kt,W,tt,N,L,he,pt,Y,K,Z,oe,X,be,Ie,O,B,dt,ze],encapsulation:2,data:{animation:mt},changeDetection:0})}}return e})();var ci=(e,a)=>a.id,si=e=>({code:e}),li=e=>({t:e}),Ge=e=>({"!text-error":e});function mi(e,a){if(e&1){let t=q();r(0,"button",8),Q("click",function(){P(t);let s=m(2);return z(s.editMode())}),r(1,"mat-icon",9),c(2,"edit"),o()()}}function pi(e,a){if(e&1&&(r(0,"span"),c(1),o()),e&2){let t=a.$implicit,i=m(3);n(),l(i.form.enabled?t("save"):"")}}function di(e,a){if(e&1){let t=q();r(0,"button",10),Q("click",function(){P(t);let s=m(2);return z(s.saveAndClose())}),f(1,pi,2,1,"span",11),o()}if(e&2){let t=m(2);d("disabled",t.form.disabled)("mskSpinner",t.form.disabled)}}function ui(e,a){if(e&1&&(r(0,"msk-dialog",6),jt(1,7),f(2,mi,3,0,"ng-template",null,2,V)(4,di,2,2,"ng-template",null,3,V),o()),e&2){let t=a.$implicit,i=F(3),s=F(5),u=m(),I=F(2),Qe=F(4);d("title",t(u.data.action,C(6,si,u.data.item==null?null:u.data.item.code)))("hasAction",u.data.action!=="view")("primaryAction",s)("trailing",i),n(),d("ngTemplateOutlet",u.data.action==="view"?I:Qe)("ngTemplateOutletContext",C(8,li,t))}}function fi(e,a){if(e&1&&(r(0,"div",22)(1,"button",23)(2,"mat-icon",24),c(3,"arrow_upward"),o(),c(4),o(),r(5,"button",25)(6,"mat-icon",24),c(7,"arrow_downward"),o(),c(8),o(),r(9,"button",25)(10,"mat-icon",24),c(11,"swap_horiz"),o(),c(12),o()()),e&2){let t=a.$implicit;n(4),v(" ",t("deposit")," "),n(4),v(" ",t("withdraw")," "),n(4),v(" ",t("transfer")," ")}}function _i(e,a){if(e&1&&(r(0,"div",18)(1,"div",26),h(2,"msk-avatar",27),o(),r(3,"div",28)(4,"span"),c(5),o(),r(6,"span"),c(7),o()(),r(8,"div",26)(9,"mat-icon"),c(10,"open_in_new"),o()()()),e&2){let t=a.$implicit;n(2),d("name",t.name),n(3),l(t.name),n(2),v("#",t.code,"")}}function vi(e,a){if(e&1&&(r(0,"div",19)(1,"div",26)(2,"mat-icon"),c(3,"credit_card_gear"),o()(),r(4,"div",28)(5,"span"),c(6),o(),r(7,"span"),c(8),o()()()),e&2){let t=m().t,i=m();n(6),l(i.data.item==null?null:i.data.item.accountTypeName),n(2),l(t("accountType"))}}function hi(e,a){if(e&1&&(r(0,"div",19)(1,"div",26)(2,"mat-icon"),c(3,"calendar_add_on"),o()(),r(4,"div",28)(5,"span"),c(6),A(7,"mskDateTime"),o(),r(8,"span"),c(9),o()()()),e&2){let t=m().t,i=m();n(6),l(yt(7,2,i.data.item==null?null:i.data.item.createDate,"longDate")||"-"),n(3),l(t("createDate"))}}function gi(e,a){if(e&1&&(r(0,"div",19)(1,"div",26)(2,"mat-icon"),c(3,"event_busy"),o()(),r(4,"div",28)(5,"span"),c(6),A(7,"mskDateTime"),o(),r(8,"span"),c(9),o()()()),e&2){let t=m().t,i=m();n(6),l(yt(7,2,i.data.item==null?null:i.data.item.closeDate,"longDate")||"-"),n(3),l(t("closeDate"))}}function xi(e,a){if(e&1&&(r(0,"div",16)(1,"div",17),c(2),o(),r(3,"div",19)(4,"div",26)(5,"mat-icon"),c(6,"sticky_note_2"),o()(),r(7,"div",28)(8,"span"),c(9),o()()()()),e&2){let t=m().t,i=m();n(2),l(t("note")),n(7),l(i.data.item==null?null:i.data.item.note)}}function Ci(e,a){if(e&1){let t=q();r(0,"div",29)(1,"div",17),c(2),o(),r(3,"div",30),Q("click",function(){P(t);let s=m(2);return z(s.updateStatus())}),r(4,"div",26)(5,"mat-icon",31),c(6),o()(),r(7,"div",28)(8,"span",31),c(9),o()()()()}if(e&2){let t=a.$implicit,i=m(2);n(2),l(t("settings")),n(3),d("ngClass",C(5,Ge,i.data.item==null?null:i.data.item.isActive)),n(),v(" ",i.data.item!=null&&i.data.item.isActive?"cancel":"check_circle"," "),n(2),d("ngClass",C(7,Ge,i.data.item==null?null:i.data.item.isActive)),n(),v(" ",i.data.item!=null&&i.data.item.isActive?t("accounts.deactivate"):t("accounts.activate")," ")}}function Si(e,a){if(e&1&&(r(0,"div",12)(1,"span",13),c(2),o(),r(3,"span",14),c(4),A(5,"currency"),o()(),f(6,fi,13,3,"div",15),r(7,"div",16)(8,"div",17),c(9),o(),T(10,_i,11,3,"div",18,ci),o(),r(12,"div",16)(13,"div",17),c(14),o(),f(15,vi,9,2,"div",19)(16,hi,10,5,"div",19)(17,gi,10,5,"div",19),o(),f(18,xi,10,2,"div",16),h(19,"div",20),f(20,Ci,10,9,"div",21)),e&2){let t=a.t,i=m();n(2),l(t("credit")),n(2),l(R(5,8,i.data.item==null?null:i.data.item.balance)),n(5),l(t("owners")),n(),w(i.data.item==null?null:i.data.item.persons),n(4),l(t("about")),n(),y(i.data.item!=null&&i.data.item.accountTypeName?15:-1),n(),y(i.data.item!=null&&i.data.item.createDate?16:-1),n(),y(i.data.item!=null&&i.data.item.closeDate?17:-1),n(),y(i.data.item!=null&&i.data.item.note?18:-1)}}function yi(e,a){if(e&1&&(r(0,"msk-alert",33)(1,"span",40),c(2),o(),c(3),o()),e&2){let t=a.$implicit;n(2),l(t("info-edit-title")),n(),v(" ",t("info-edit-description")," ")}}function Di(e,a){e&1&&f(0,yi,4,2,"msk-alert",39),e&2&&d("translocoRead","accounts")}function Ai(e,a){if(e&1&&(r(0,"msk-alert",34),c(1),o()),e&2){let t=m(2);d("@shake",void 0),n(),v(" ",t.alert().message," ")}}function ki(e,a){if(e&1&&(r(0,"mat-option",37),c(1),o()),e&2){let t=a.$implicit;d("value",t.id),n(),l(t.name)}}function Ei(e,a){if(e&1&&(r(0,"div",35)(1,"mat-form-field")(2,"mat-label"),c(3),o(),r(4,"mat-select",41),T(5,ki,2,2,"mat-option",37,Ct),A(7,"async"),o(),r(8,"mat-error"),c(9),o()(),r(10,"mat-form-field")(11,"mat-label"),c(12),o(),h(13,"input",42)(14,"mat-datepicker-toggle",43)(15,"mat-datepicker",null,4),r(17,"mat-error"),c(18),o()()()),e&2){let t=F(16),i=m().t,s=m();n(3),l(i("accountType")),n(2),w(R(7,6,s.accountTypeList$)),n(4),l(s.formErrors.accountTypeId),n(3),l(i("createDate")),n(),d("matDatepicker",t),n(),d("for",t),n(4),l(s.formErrors.createDate)}}function Mi(e,a){if(e&1&&(r(0,"mat-option",37),c(1),o()),e&2){let t=a.$implicit;d("value",t.id),n(),l(t.name)}}function bi(e,a){if(e&1&&(r(0,"mat-form-field")(1,"mat-label"),c(2),o(),h(3,"input",44),r(4,"mat-error"),c(5),o()()),e&2){let t=m().t,i=m();n(2),l(t("initCredit")),n(3),l(i.formErrors.initCredit)}}function Ii(e,a){if(e&1&&(r(0,"form",32),f(1,Di,1,1,"msk-alert",33)(2,Ai,2,2,"msk-alert",34)(3,Ei,19,8,"div",35),r(4,"mat-form-field")(5,"mat-label"),c(6),o(),r(7,"mat-select",36),zt(8),A(9,"async"),r(10,"mat-select-trigger"),c(11),o(),T(12,Mi,2,2,"mat-option",37,Ct),o(),r(14,"mat-error"),c(15),o()(),f(16,bi,6,2,"mat-form-field"),r(17,"mat-form-field"),h(18,"textarea",38),r(19,"mat-error"),c(20),o()()()),e&2){let t=a.t,i=m();d("formGroup",i.form),n(),y(i.data.action==="edit"?1:-1),n(),y(i.alert().show?2:-1),n(),y(i.data.action==="new"?3:-1),n(3),l(t("owners"));let s=R(9,11,i.personList$);n(5),l(i.personIdTitles(s)),n(),w(s),n(3),l(i.formErrors.personId),n(),y(i.data.action==="new"?16:-1),n(2),d("placeholder",t("note"))("rows",2),n(2),l(i.formErrors.note)}}var qe=(()=>{class e{constructor(){this.data=p(xe),this.dialogRef=p(ge),this._formBuilder=p(de),this._peopleService=p(Ee),this._accountService=p(b),this._translocoService=p(re),this._changeDetectorRef=p(U),this._mskConfirmationService=p(Le),this.formErrors={},this.personList$=this._peopleService.getLookupPersons(),this.accountTypeList$=this._accountService.getLookupAccountTypes(),this.alert=Bt({show:!1,message:""})}ngOnInit(){this.form=this._formBuilder.group({id:[0,M.required],personId:[[],M.required],accountTypeId:["",M.required],initCredit:["",[M.required,M.min(1e3)]],createDate:[new Date,M.required],note:""}),new Be(this.form,this.formErrors,this._translocoService),this.form.patchValue(this.data.item||{}),this.form.get("personId")?.patchValue(this.data.item?.persons.map(t=>t.id)||[])}personIdTitles(t){let i=this.form.get("personId")?.value;return t?.find(u=>u.id===i[0])?.name+(i.length>1?` (+${i.length-1} ${this._translocoService.translate("other")})`:"")}editMode(){this.data.action="edit",this.form.get("initCredit")?.clearValidators()}updateStatus(){let t=this.data.item?.isActive;this._mskConfirmationService.open({title:this._translocoService.translate(t?"accounts.deactivate":"accounts.activate"),message:this._translocoService.translate(t?"accounts.deactivate-message":"accounts.activate-message",{name:this.data.item?.fullName}),actions:{confirm:{label:this._translocoService.translate(t?"close":"open")},cancel:{label:this._translocoService.translate("cancel")}}}).afterClosed().subscribe(s=>{if(s!=="confirmed")return;let u={id:this.data.item?.id,closeDate:new Date};this._accountService.closeAccount(u).pipe(_(I=>{this.data.item=I,this._changeDetectorRef.markForCheck()}),k(I=>gt)).subscribe()})}saveAndClose(){if(Oe(this.form),this.form.invalid)return;this.form.disable(),this.alert.set({show:!1,message:""}),(this.data.action==="edit"?this._accountService.updateAccount({id:this.form.value.id,personId:this.form.value.personId,note:this.form.value.note}):this._accountService.createAccount(this.form.value)).pipe(S(i=>this.dialogRef.close(i)),k(i=>(this.form.enable(),this.alert.set({show:!0,message:i.error.message}),Ve(i.error.errors,this.form),gt))).subscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=g({type:e,selectors:[["main-people-details"]],standalone:!0,features:[x],decls:5,vars:1,consts:[["viewTemplate",""],["formTemplate",""],["trailing",""],["primaryAction",""],["picker",""],[3,"title","hasAction","primaryAction","trailing",4,"transloco","translocoRead"],[3,"title","hasAction","primaryAction","trailing"],["msk-dialog-content","",3,"ngTemplateOutlet","ngTemplateOutletContext"],["mat-icon-button","",3,"click"],[1,"mat-icon-rtl-mirror","text-current"],["mat-button","",3,"click","disabled","mskSpinner"],[4,"transloco"],[1,"flex","flex-col","gap-4","p-4"],[1,"text-on-surface-variant","text-label-medium"],[1,"text-on-surface","text-title-large"],["class","grid grid-cols-3 gap-4 py-4",4,"transloco"],[1,"msk-mat-card-filled","mb-2","p-4"],[1,"text-secondary","mb-2","font-bold"],["matRipple","",1,"msk-list-item","-mx-4","cursor-pointer"],[1,"msk-list-item","-mx-4"],[1,"my-4","border-t"],["class","mb-2",4,"transloco"],[1,"grid","grid-cols-3","gap-4","py-4"],["mat-flat-button",""],[1,"hidden","sm:block"],["mat-stroked-button",""],[1,"msk-list-item-icon"],[3,"name"],[1,"msk-list-item-content"],[1,"mb-2"],["matRipple","",1,"msk-list-item","-mx-6","cursor-pointer","gap-2",3,"click"],[3,"ngClass"],[1,"flex","flex-auto","flex-col","gap-y-2",3,"formGroup"],["appearance","outline","type","info","dismissible","",1,"mb-4"],["appearance","outline","type","error",1,"mb-4"],[1,"flex","flex-col","gap-x-4","sm:flex-row","[&>*]:flex-1"],["formControlName","personId","multiple",""],[3,"value"],["matInput","","formControlName","note",3,"placeholder","rows"],["class","mb-4","appearance","outline","type","info","dismissible","",4,"transloco","translocoRead"],["mskAlertTitle",""],["formControlName","accountTypeId"],["matInput","","formControlName","createDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","formControlName","initCredit","autocomplete","off"]],template:function(i,s){i&1&&f(0,ui,6,10,"msk-dialog",5)(1,Si,21,10,"ng-template",null,0,V)(3,Ii,21,13,"ng-template",null,1,V),i&2&&d("translocoRead","accounts.details")},dependencies:[$,Ut,H,Ht,st,at,it,nt,ot,lt,rt,ct,N,L,pt,ye,ee,Xt,Zt,te,Y,K,Z,ne,ae,_e,ue,fe,Yt,et,X,Re,Te,we,Fe,Se,B,ve,dt,$e,De,Ne],encapsulation:2,data:{animation:mt},changeDetection:0})}}return e})();var kt=(()=>{class e{constructor(){this._router=p(J),this._injector=p(Lt),this._matDialog=p(Ce),this._destroyRef=p(G),this._activatedRoute=p(Jt),this._mskLayoutConfigService=p(ie)}ngOnInit(){let t=this._activatedRoute.snapshot.url[1].path;this._mskLayoutConfigService.config$.pipe(E(this._destroyRef),_(i=>this.layoutDirection=Qt(i.locale))).subscribe(),this._matDialog.open(qe,{autoFocus:t!=="view",disableClose:t!=="view",direction:this.layoutDirection,data:{action:t,item:this._activatedRoute.snapshot.data.card}}).afterClosed().subscribe(i=>{t==="new"&&i!="cancelled"&&this._injector.get(_t).getAccounts().subscribe(),this._router.navigate([this._activatedRoute.snapshot.url.map(()=>"../").join("")],{relativeTo:this._activatedRoute})})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=g({type:e,selectors:[["main-accounts-card"]],standalone:!0,features:[x],decls:0,vars:0,template:function(i,s){},encapsulation:2,changeDetection:0})}}return e})();var Ti=Et({"./i18n/en.json":()=>import("./chunk-V4WTMKZN.js"),"./i18n/fa.json":()=>import("./chunk-HTZE5BF4.js")});var wi=(e,a)=>{let t=p(b),i=p(J);return t.getAccountWithBalance(e.paramMap.get("id")??0).pipe(k(s=>{console.error(s);let u=a.url.split("/").slice(0,-1).join("/");return i.navigateByUrl(u),bt(()=>new Error(s.message))}))},wo=[{path:"",component:je,providers:[ce({scope:"accounts",loader:se((e,a)=>Ti(`./${a}/${e}.json`))})],children:[{path:"",component:_t,resolve:{persons:()=>p(b).getAccounts()},children:[{path:"card/new",component:kt,resolve:{}},{path:"card/view/:id",component:kt,resolve:{card:wi}}]}]}];export{je as AccountsComponent,wo as routes};
