import{$ as A,Aa as S,Ab as Ze,C as xe,Ca as ze,E as je,F as ke,Fc as tt,Hb as Qe,Hc as nt,I as Fe,Ia as Ke,Ic as X,L as Ce,Lb as He,Mc as de,Oc as rt,Pa as Ge,R as _e,U as Ue,Uc as st,X as E,Xb as et,Y as $e,_ as ae,ad as it,ba as T,c as K,ea as y,f as Me,fb as Je,g as Ne,ga as m,h as Pe,ha as u,j as Ie,jd as ot,k as C,ka as L,l as N,lb as le,nb as Xe,oa as Be,ob as U,p as De,pa as ce,q as b,qa as _,qb as qe,r as Se,ra as Ve,w as G,xb as We,ya as J,zb as Ye}from"./chunk-LCKJWARP.js";import{a as p,b as D,d as oe}from"./chunk-NWJ5J3BN.js";var B=class{},W=class{},P=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let s=e.slice(0,r),i=e.slice(r+1).trim();this.addHeaderEntry(s,i)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,e);let s=(n.op==="a"?this.headers.get(e):void 0)||[];s.push(...r),this.headers.set(e,s);break;case"d":let i=n.value;if(!i)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>i.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}addHeaderEntry(n,e){let r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(n,e){let r=(Array.isArray(e)?e:[e]).map(i=>i.toString()),s=n.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(n,s)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var he=class{encodeKey(n){return at(n)}encodeValue(n){return at(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function Kt(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(s=>{let i=s.indexOf("="),[o,a]=i==-1?[n.decodeKey(s),""]:[n.decodeKey(s.slice(0,i)),n.decodeValue(s.slice(i+1))],c=e.get(o)||[];c.push(a),e.set(o,c)}),e}var Gt=/%(\d[a-f0-9])/gi,Jt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function at(t){return encodeURIComponent(t).replace(Gt,(n,e)=>Jt[e]??n)}function q(t){return`${t}`}var O=class t{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new he,n.fromString){if(n.fromObject)throw new A(2805,!1);this.map=Kt(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let r=n.fromObject[e],s=Array.isArray(r)?r.map(q):[q(r)];this.map.set(e,s)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(r=>{let s=n[r];Array.isArray(s)?s.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:s,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(q(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let r=this.map.get(n.param)||[],s=r.indexOf(q(n.value));s!==-1&&r.splice(s,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var fe=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function Xt(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ct(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function lt(t){return typeof Blob<"u"&&t instanceof Blob}function dt(t){return typeof FormData<"u"&&t instanceof FormData}function qt(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ut="Content-Type",ht="Accept",mt="X-Request-URL",vt="text/plain",Tt="application/json",Wt=`${Tt}, ${vt}, */*`,$=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,e,r,s){this.url=e,this.method=n.toUpperCase();let i;if(Xt(this.method)||s?(this.body=r!==void 0?r:null,i=s):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new P,this.context??=new fe,!this.params)this.params=new O,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ct(this.body)||lt(this.body)||dt(this.body)||qt(this.body)?this.body:this.body instanceof O?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||dt(this.body)?null:lt(this.body)?this.body.type||null:ct(this.body)?null:typeof this.body=="string"?vt:this.body instanceof O?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Tt:null}clone(n={}){let e=n.method||this.method,r=n.url||this.url,s=n.responseType||this.responseType,i=n.transferCache??this.transferCache,o=n.body!==void 0?n.body:this.body,a=n.withCredentials??this.withCredentials,c=n.reportProgress??this.reportProgress,l=n.headers||this.headers,d=n.params||this.params,h=n.context??this.context;return n.setHeaders!==void 0&&(l=Object.keys(n.setHeaders).reduce((R,w)=>R.set(w,n.setHeaders[w]),l)),n.setParams&&(d=Object.keys(n.setParams).reduce((R,w)=>R.set(w,n.setParams[w]),d)),new t(e,r,o,{params:d,headers:l,context:h,reportProgress:c,responseType:s,withCredentials:a,transferCache:i})}},x=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(x||{}),V=class{headers;status;statusText;url;ok;type;constructor(n,e=200,r="OK"){this.headers=n.headers||new P,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},pe=class t extends V{constructor(n={}){super(n)}type=x.ResponseHeader;clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Y=class t extends V{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=x.Response;clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Z=class extends V{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},Yt=200,Zt=204;function ue(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var ge=(()=>{class t{handler;constructor(e){this.handler=e}request(e,r,s={}){let i;if(e instanceof $)i=e;else{let c;s.headers instanceof P?c=s.headers:c=new P(s.headers);let l;s.params&&(s.params instanceof O?l=s.params:l=new O({fromObject:s.params})),i=new $(e,r,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let o=N(i).pipe(ke(c=>this.handler.handle(c)));if(e instanceof $||s.observe==="events")return o;let a=o.pipe(xe(c=>c instanceof Y));switch(s.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(b(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new A(2806,!1);return c.body}));case"blob":return a.pipe(b(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new A(2807,!1);return c.body}));case"text":return a.pipe(b(c=>{if(c.body!==null&&typeof c.body!="string")throw new A(2808,!1);return c.body}));case"json":default:return a.pipe(b(c=>c.body))}case"response":return a;default:throw new A(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new O().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,s={}){return this.request("PATCH",e,ue(s,r))}post(e,r,s={}){return this.request("POST",e,ue(s,r))}put(e,r,s={}){return this.request("PUT",e,ue(s,r))}static \u0275fac=function(r){return new(r||t)(m(B))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})();var Qt=new y("");function Ht(t,n){return n(t)}function en(t,n,e){return(r,s)=>ce(e,()=>n(r,i=>t(i,s)))}var ye=new y(""),tn=new y(""),nn=new y("",{providedIn:"root",factory:()=>!0});var ft=(()=>{class t extends B{backend;injector;chain=null;pendingTasks=u(ze);contributeToStability=u(nn);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(ye),...this.injector.get(tn,[])]));this.chain=r.reduceRight((s,i)=>en(s,i,this.injector),Ht)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,s=>this.backend.handle(s)).pipe(Ce(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(m(W),m(Be))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})();var rn=/^\)\]\}',?\n/,sn=RegExp(`^${mt}:`,"m");function on(t){return"responseURL"in t&&t.responseURL?t.responseURL:sn.test(t.getAllResponseHeaders())?t.getResponseHeader(mt):null}var pt=(()=>{class t{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new A(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?C(r.\u0275loadImpl()):N(null)).pipe(E(()=>new K(i=>{let o=r.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((f,g)=>o.setRequestHeader(f,g.join(","))),e.headers.has(ht)||o.setRequestHeader(ht,Wt),!e.headers.has(ut)){let f=e.detectContentTypeHeader();f!==null&&o.setRequestHeader(ut,f)}if(e.responseType){let f=e.responseType.toLowerCase();o.responseType=f!=="json"?f:"text"}let a=e.serializeBody(),c=null,l=()=>{if(c!==null)return c;let f=o.statusText||"OK",g=new P(o.getAllResponseHeaders()),I=on(o)||e.url;return c=new pe({headers:g,status:o.status,statusText:f,url:I}),c},d=()=>{let{headers:f,status:g,statusText:I,url:Oe}=l(),v=null;g!==Zt&&(v=typeof o.response>"u"?o.responseText:o.response),g===0&&(g=v?Yt:0);let ie=g>=200&&g<300;if(e.responseType==="json"&&typeof v=="string"){let Ut=v;v=v.replace(rn,"");try{v=v!==""?JSON.parse(v):null}catch($t){v=Ut,ie&&(ie=!1,v={error:$t,text:v})}}ie?(i.next(new Y({body:v,headers:f,status:g,statusText:I,url:Oe||void 0})),i.complete()):i.error(new Z({error:v,headers:f,status:g,statusText:I,url:Oe||void 0}))},h=f=>{let{url:g}=l(),I=new Z({error:f,status:o.status||0,statusText:o.statusText||"Unknown Error",url:g||void 0});i.error(I)},R=!1,w=f=>{R||(i.next(l()),R=!0);let g={type:x.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(g.total=f.total),e.responseType==="text"&&o.responseText&&(g.partialText=o.responseText),i.next(g)},Ae=f=>{let g={type:x.UploadProgress,loaded:f.loaded};f.lengthComputable&&(g.total=f.total),i.next(g)};return o.addEventListener("load",d),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),e.reportProgress&&(o.addEventListener("progress",w),a!==null&&o.upload&&o.upload.addEventListener("progress",Ae)),o.send(a),i.next({type:x.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",d),o.removeEventListener("timeout",h),e.reportProgress&&(o.removeEventListener("progress",w),a!==null&&o.upload&&o.upload.removeEventListener("progress",Ae)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||t)(m(ot))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})(),bt=new y(""),an="XSRF-TOKEN",cn=new y("",{providedIn:"root",factory:()=>an}),ln="X-XSRF-TOKEN",dn=new y("",{providedIn:"root",factory:()=>ln}),Q=class{},un=(()=>{class t{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r,s){this.doc=e,this.platform=r,this.cookieName=s}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=it(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||t)(m(st),m(Ge),m(cn))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})();function hn(t,n){let e=t.url.toLowerCase();if(!u(bt)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let r=u(Q).getToken(),s=u(dn);return r!=null&&!t.headers.has(s)&&(t=t.clone({headers:t.headers.set(s,r)})),n(t)}var wt=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(wt||{});function fn(t,n){return{\u0275kind:t,\u0275providers:n}}function sr(...t){let n=[ge,pt,ft,{provide:B,useExisting:ft},{provide:W,useFactory:()=>u(Qt,{optional:!0})??u(pt)},{provide:ye,useValue:hn,multi:!0},{provide:bt,useValue:!0},{provide:Q,useClass:un}];for(let e of t)n.push(...e.\u0275providers);return L(n)}function ir(t){return fn(wt.Interceptors,t.map(n=>({provide:ye,useValue:n,multi:!0})))}function H(t){t||(_(H),t=u(S));let n=new K(e=>t.onDestroy(e.next.bind(e)));return e=>e.pipe($e(n))}function Lt(t,n){!n?.injector&&_(Lt);let e=n?.injector??u(J),r=new Pe(1),s=rt(()=>{let i;try{i=t()}catch(o){de(()=>r.error(o));return}de(()=>r.next(i))},{injector:e,manualCleanup:!0});return e.get(S).onDestroy(()=>{s.destroy(),r.complete()}),r.asObservable()}var Te=class{translations;constructor(n){this.translations=n}getTranslation(n){return N(this.translations.get(n)||{})}},At=new y("");function me(t,n){return t&&(Object.prototype.hasOwnProperty.call(t,n)?t[n]:n.split(".").reduce((e,r)=>e?.[r],t))}function pn(t,n,e){t=p({},t);let r=n.split("."),s=r.length-1;return r.reduce((i,o,a)=>(a===s?i[o]=e:i[o]=Array.isArray(i[o])?i[o].slice():p({},i[o]),i&&i[o]),t),t}function Ot(t){return t?Array.isArray(t)?t.length:ne(t)?Object.keys(t).length:t?t.length:0:0}function gn(t){return Ot(t)===0}function yn(t){return typeof t=="function"}function k(t){return typeof t=="string"}function ne(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}function Mt(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,(n,e)=>e==0?n.toLowerCase():n.toUpperCase()).replace(/\s+|_|-|\//g,"")}function be(t){return t==null}function Rt(t){return be(t)===!1}function Nt(t){return t&&typeof t.scope=="string"}function mn(t){return t&&ne(t.loader)}function Et(t){let n={};function e(r,s){if(r===null)n[s]=null;else if(ne(r))for(let[i,o]of Object.entries(r))e(o,s?`${s}.${i}`:i);else n[s]=r}return e(t,""),n}function vn(t){let n={};for(let[e,r]of Object.entries(t)){let s=e.split("."),i=n;s.forEach((o,a)=>{a===s.length-1?i[o]=r:(i[o]??={},i=i[o])})}return n}var F=new y("",{providedIn:"root",factory:()=>j}),j={defaultLang:"en",reRenderOnLangChange:!1,prodMode:!1,failedRetries:2,fallbackLang:[],availableLangs:[],missingHandler:{logMissingKey:!0,useFallbackTranslation:!1,allowEmpty:!1},flatten:{aot:!1},interpolation:["{{","}}"],scopes:{keepCasing:!1}};function Tn(t={}){return D(p(p({},j),t),{missingHandler:p(p({},j.missingHandler),t.missingHandler),flatten:p(p({},j.flatten),t.flatten),scopes:p(p({},j.scopes),t.scopes)})}var Pt=new y(""),bn=(()=>{class t{config=u(F,{optional:!0})??j;get interpolationMatcher(){return wn(this.config)}transpile({value:e,params:r={},translation:s,key:i}){if(k(e)){let o,a=e;for(;(o=this.interpolationMatcher.exec(a))!==null;){let[c,l]=o;a=a.replace(c,()=>{let d=l.trim(),h=me(r,d);return Rt(h)?h:Rt(s[d])?this.transpile({params:r,translation:s,key:i,value:s[d]}):""})}return a}else r&&(ne(e)?e=this.handleObject({value:e,params:r,translation:s,key:i}):Array.isArray(e)&&(e=this.handleArray({value:e,params:r,translation:s,key:i})));return e}handleObject({value:e,params:r={},translation:s,key:i}){let o=e;return Object.keys(r).forEach(a=>{let c=this.transpile({value:me(o,a),params:me(r,a),translation:s,key:i});o=pn(o,a,c)}),o}handleArray(s){var i=s,{value:e}=i,r=oe(i,["value"]);return e.map(o=>this.transpile(p({value:o},r)))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})();function wn(t){let[n,e]=t.interpolation;return new RegExp(`${n}([^${n}${e}]*?)${e}`,"g")}var It=new y(""),Ln=(()=>{class t{handle(e,r){if(r.missingHandler.logMissingKey&&!r.prodMode){let s=`Missing translation for '${e}'`;console.warn(`%c ${s}`,"font-size: 12px; color: red")}return e}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})(),Dt=new y(""),Rn=(()=>{class t{preSaveTranslation(e){return e}preSaveTranslationKey(e,r){return r}static \u0275fac=function(r){return new(r||t)};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})(),St=new y(""),En=(()=>{class t{userConfig;constructor(e){this.userConfig=e}getNextLangs(){let e=this.userConfig.fallbackLang;if(!e)throw new Error("When using the default fallback, a fallback language must be provided in the config!");return Array.isArray(e)?e:[e]}static \u0275fac=function(r){return new(r||t)(m(F))};static \u0275prov=T({token:t,factory:t.\u0275fac})}return t})();function z(t){if(!t)return"";let n=t.split("/");return n.pop(),n.join("/")}function M(t){return t?t.split("/").pop():""}function we(t,n,e="|"){if(k(t)){let r=t.split(e),s=r.pop();return s===n?[!0,r.toString()]:[!1,s]}return[!1,""]}function xt(t,n){let[e]=we(n,"static");return e?!1:!!t.config.reRenderOnLangChange}function jt(t){return t?n=>n:Fe(1)}function An(t,n){return Object.keys(t).reduce((e,r)=>(e[`${n}/${r}`]=t[r],e),{})}function Re(t,n){return mn(t)?An(t.loader,n):void 0}function ve(t){return{scope:z(t)||null,langName:M(t)}}function kt(t){let{path:n,inlineLoader:e,mainLoader:r,data:s}=t;if(e){let i=e[n];if(yn(i)===!1)throw`You're using an inline loader but didn't provide a loader for ${n}`;return e[n]().then(o=>o.default?o.default:o)}return r.getTranslation(n,s)}function On({mainLoader:t,path:n,data:e,fallbackPath:r,inlineLoader:s}){return(r?[n,r]:[n]).map(o=>{let a=kt({path:o,mainLoader:t,inlineLoader:s,data:e});return C(a).pipe(b(c=>({translation:c,lang:o})))})}var Mn;var re=(()=>{class t{loader;parser;missingHandler;interceptor;fallbackStrategy;langChanges$;translations=new Map;cache=new Map;firstFallbackLang;defaultLang="";availableLangs=[];isResolvedMissingOnce=!1;lang;failedLangs=new Set;events=new Me;events$=this.events.asObservable();config;destroyRef=u(S);constructor(e,r,s,i,o,a){this.loader=e,this.parser=r,this.missingHandler=s,this.interceptor=i,this.fallbackStrategy=a,this.loader||(this.loader=new Te(this.translations)),Mn=this,this.config=JSON.parse(JSON.stringify(o)),this.setAvailableLangs(this.config.availableLangs||[]),this.setFallbackLangForMissingTranslation(this.config),this.setDefaultLang(this.config.defaultLang),this.lang=new Ne(this.getDefaultLang()),this.langChanges$=this.lang.asObservable(),this.events$.subscribe(c=>{c.type==="translationLoadSuccess"&&c.wasFailure&&this.setActiveLang(c.payload.langName)}),this.destroyRef.onDestroy(()=>{this.lang.complete(),this.events.complete(),this.cache.clear()})}getDefaultLang(){return this.defaultLang}setDefaultLang(e){this.defaultLang=e}getActiveLang(){return this.lang.getValue()}setActiveLang(e){return this.parser.onLangChanged?.(e),this.lang.next(e),this.events.next({type:"langChanged",payload:ve(e)}),this}setAvailableLangs(e){this.availableLangs=e}getAvailableLangs(){return this.availableLangs}load(e,r={}){let s=this.cache.get(e);if(s)return s;let i,o=this._isLangScoped(e),a;o&&(a=z(e));let c={path:e,mainLoader:this.loader,inlineLoader:r.inlineLoader,data:o?{scope:a}:void 0};if(this.useFallbackTranslation(e)){let d=o?`${a}/${this.firstFallbackLang}`:this.firstFallbackLang,h=On(D(p({},c),{fallbackPath:d}));i=G(h)}else{let d=kt(c);i=C(d)}let l=i.pipe(_e(this.config.failedRetries),ae(d=>{if(Array.isArray(d)){d.forEach(h=>{this.handleSuccess(h.lang,h.translation),h.lang!==e&&this.cache.set(h.lang,N({}))});return}this.handleSuccess(e,d)}),je(d=>(this.config.prodMode||console.error(`Error while trying to load "${e}"`,d),this.handleFailure(e,r))),Ue(1),H(this.destroyRef));return this.cache.set(e,l),l}translate(e,r={},s=this.getActiveLang()){if(!e)return e;let{scope:i,resolveLang:o}=this.resolveLangAndScope(s);if(Array.isArray(e))return e.map(l=>this.translate(i?`${i}.${l}`:l,r,o));e=i?`${i}.${e}`:e;let a=this.getTranslation(o),c=a[e];return c?this.parser.transpile({value:c,params:r,translation:a,key:e}):this._handleMissingKey(e,c,r)}selectTranslate(e,r,s,i=!1){let o,a=(l,d)=>this.load(l,d).pipe(b(()=>i?this.translateObject(e,r,l):this.translate(e,r,l)));if(be(s))return this.langChanges$.pipe(E(l=>a(l)));if(s=Array.isArray(s)?s[0]:s,Nt(s)){let l=s;s=l.scope,o=Re(l,l.scope)}if(s=s,this.isLang(s)||this.isScopeWithLang(s))return a(s);let c=s;return this.langChanges$.pipe(E(l=>a(`${c}/${l}`,{inlineLoader:o})))}isScopeWithLang(e){return this.isLang(M(e))}translateObject(e,r={},s=this.getActiveLang()){if(k(e)||Array.isArray(e)){let{resolveLang:o,scope:a}=this.resolveLangAndScope(s);if(Array.isArray(e))return e.map(d=>this.translateObject(a?`${a}.${d}`:d,r,o));let c=this.getTranslation(o);e=a?`${a}.${e}`:e;let l=vn(this.getObjectByKey(c,e));return gn(l)?this.translate(e,r,s):this.parser.transpile({value:l,params:r,translation:c,key:e})}let i=[];for(let[o,a]of this.getEntries(e))i.push(this.translateObject(o,a,s));return i}selectTranslateObject(e,r,s){if(k(e)||Array.isArray(e))return this.selectTranslate(e,r,s,!0);let[[i,o],...a]=this.getEntries(e);return this.selectTranslateObject(i,o,s).pipe(b(c=>{let l=[c];for(let[d,h]of a)l.push(this.translateObject(d,h,s));return l}))}getTranslation(e){if(e){if(this.isLang(e))return this.translations.get(e)||{};{let{scope:r,resolveLang:s}=this.resolveLangAndScope(e),i=this.translations.get(s)||{};return this.getObjectByKey(i,r)}}return this.translations}selectTranslation(e){let r=this.langChanges$;if(e){let s=M(e)!==e;this.isLang(e)||s?r=N(e):r=this.langChanges$.pipe(b(i=>`${e}/${i}`))}return r.pipe(E(s=>this.load(s).pipe(b(()=>this.getTranslation(s)))))}setTranslation(e,r=this.getActiveLang(),s={}){let o=p(p({},{merge:!0,emitChange:!0}),s),a=z(r),c=e;if(a){let w=this.getMappedScope(a);c=Et({[w]:e})}let l=a?M(r):r,d=p(p({},o.merge&&this.getTranslation(l)),c),h=this.config.flatten.aot?d:Et(d),R=this.interceptor.preSaveTranslation(h,l);this.translations.set(l,R),o.emitChange&&this.setActiveLang(this.getActiveLang())}setTranslationKey(e,r,s={}){let i=s.lang||this.getActiveLang(),o=this.interceptor.preSaveTranslationKey(e,r,i),a={[e]:o};this.setTranslation(a,i,D(p({},s),{merge:!0}))}setFallbackLangForMissingTranslation({fallbackLang:e}){let r=Array.isArray(e)?e[0]:e;e&&this.useFallbackTranslation(r)&&(this.firstFallbackLang=r)}_handleMissingKey(e,r,s){if(this.config.missingHandler.allowEmpty&&r==="")return"";if(!this.isResolvedMissingOnce&&this.useFallbackTranslation()){this.isResolvedMissingOnce=!0;let i=this.translate(e,s,this.firstFallbackLang);return this.isResolvedMissingOnce=!1,i}return this.missingHandler.handle(e,this.getMissingHandlerData(),s)}_isLangScoped(e){return this.getAvailableLangsIds().indexOf(e)===-1}isLang(e){return this.getAvailableLangsIds().indexOf(e)!==-1}_loadDependencies(e,r){let s=M(e);return this._isLangScoped(e)&&!this.isLoadedTranslation(s)?Se([this.load(s),this.load(e,{inlineLoader:r})]):this.load(e,{inlineLoader:r})}_completeScopeWithLang(e){return this._isLangScoped(e)&&!this.isLang(M(e))?`${e}/${this.getActiveLang()}`:e}_setScopeAlias(e,r){this.config.scopeMapping||(this.config.scopeMapping={}),this.config.scopeMapping[e]=r}isLoadedTranslation(e){return Ot(this.getTranslation(e))}getAvailableLangsIds(){let e=this.getAvailableLangs()[0];return k(e)?this.getAvailableLangs():this.getAvailableLangs().map(r=>r.id)}getMissingHandlerData(){return D(p({},this.config),{activeLang:this.getActiveLang(),availableLangs:this.availableLangs,defaultLang:this.defaultLang})}useFallbackTranslation(e){return this.config.missingHandler.useFallbackTranslation&&e!==this.firstFallbackLang}handleSuccess(e,r){this.setTranslation(r,e,{emitChange:!1}),this.events.next({wasFailure:!!this.failedLangs.size,type:"translationLoadSuccess",payload:ve(e)}),this.failedLangs.forEach(s=>this.cache.delete(s)),this.failedLangs.clear()}handleFailure(e,r){be(r.failedCounter)&&(r.failedCounter=0,r.fallbackLangs||(r.fallbackLangs=this.fallbackStrategy.getNextLangs(e)));let s=e.split("/"),o=r.fallbackLangs[r.failedCounter];if(this.failedLangs.add(e),this.cache.has(o))return this.handleSuccess(o,this.getTranslation(o)),Ie;let a=o===s[s.length-1];if(!o||a){let l="Unable to load translation and all the fallback languages";throw s.length>1&&(l+=", did you misspelled the scope name?"),new Error(l)}let c=o;return s.length>1&&(s[s.length-1]=o,c=s.join("/")),r.failedCounter++,this.events.next({type:"translationLoadFailure",payload:ve(e)}),this.load(c,r)}getMappedScope(e){let{scopeMapping:r={},scopes:s={keepCasing:!1}}=this.config;return r[e]||(s.keepCasing?e:Mt(e))}resolveLangAndScope(e){let r=e,s;if(this._isLangScoped(e)){let i=M(e),o=this.isLang(i);r=o?i:this.getActiveLang(),s=this.getMappedScope(o?z(e):e)}return{scope:s,resolveLang:r}}getObjectByKey(e,r){let s={},i=`${r}.`;for(let o in e)o.startsWith(i)&&(s[o.replace(i,"")]=e[o]);return s}getEntries(e){return e instanceof Map?e.entries():Object.entries(e)}static \u0275fac=function(r){return new(r||t)(m(At,8),m(Pt),m(It),m(Dt),m(F),m(St))};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Nn=(()=>{class t{html;static \u0275fac=function(r){return new(r||t)};static \u0275cmp=We({type:t,selectors:[["ng-component"]],inputs:{html:"html"},decls:1,vars:1,consts:[[1,"transloco-loader-template",3,"innerHTML"]],template:function(r,s){r&1&&et(0,"div",0),r&2&&He("innerHTML",s.html,Je)},encapsulation:2})}return t})(),Le=class{view;vcr;constructor(n,e){this.view=n,this.vcr=e}attachView(){if(this.view instanceof le)this.vcr.createEmbeddedView(this.view);else if(k(this.view)){let n=this.vcr.createComponent(Nn);n.instance.html=this.view,n.hostView.detectChanges()}else this.vcr.createComponent(this.view)}detachView(){this.vcr.clear()}},Ft=new y(""),Pn=new y(""),Ee=new y(""),ee=class{initialized=!1;resolve({inline:n,provider:e,active:r}){let s=r;if(this.initialized)return s=r,s;if(e){let[,i]=we(e,"static");s=i}if(n){let[,i]=we(n,"static");s=i}return this.initialized=!0,s}resolveLangBasedOnScope(n){return z(n)?M(n):n}resolveLangPath(n,e){return e?`${e}/${n}`:n}},te=class{service;constructor(n){this.service=n}resolve(n){let{inline:e,provider:r}=n;if(e)return e;if(r){if(Nt(r)){let{scope:s,alias:i=this.service.config.scopes.keepCasing?s:Mt(s)}=r;return this.service._setScopeAlias(s,i),s}return r}}},xr=(()=>{class t{destroyRef=u(S);service=u(re);tpl=u(le,{optional:!0});providerLang=u(Ft,{optional:!0});providerScope=u(Ee,{optional:!0});providedLoadingTpl=u(Pn,{optional:!0});cdr=u(X);host=u(Ke);vcr=u(qe);renderer=u(Xe);view;memo=new Map;key;params={};inlineScope;inlineRead;prefix;inlineLang;inlineTpl;currentLang;loaderTplHandler;initialized=!1;path;langResolver=new ee;scopeResolver=new te(this.service);strategy=this.tpl===null?"attribute":"structural";static ngTemplateContextGuard(e,r){return!0}ngOnInit(){let e=xt(this.service,this.providerLang||this.inlineLang);if(this.service.langChanges$.pipe(E(r=>{let s=this.langResolver.resolve({inline:this.inlineLang,provider:this.providerLang,active:r});return Array.isArray(this.providerScope)?G(this.providerScope.map(i=>this.resolveScope(s,i))):this.resolveScope(s,this.providerScope)}),jt(e),H(this.destroyRef)).subscribe(()=>{this.currentLang=this.langResolver.resolveLangBasedOnScope(this.path),this.strategy==="attribute"?this.attributeStrategy():this.structuralStrategy(this.currentLang,this.prefix||this.inlineRead),this.cdr.markForCheck(),this.initialized=!0}),!this.initialized){let r=this.resolveLoadingContent();r&&(this.loaderTplHandler=new Le(r,this.vcr),this.loaderTplHandler.attachView())}}ngOnChanges(e){this.strategy==="attribute"&&Object.keys(e).some(s=>!e[s].firstChange)&&this.attributeStrategy()}attributeStrategy(){this.detachLoader(),this.renderer.setProperty(this.host.nativeElement,"innerText",this.service.translate(this.key,this.params,this.currentLang))}structuralStrategy(e,r){this.memo.clear();let s=this.getTranslateFn(e,r);this.view?(this.view.context.$implicit=s,this.view.context.currentLang=this.currentLang):(this.detachLoader(),this.view=this.vcr.createEmbeddedView(this.tpl,{$implicit:s,currentLang:this.currentLang}))}getTranslateFn(e,r){return(s,i)=>{let o=r?`${r}.${s}`:s,a=i?`${o}${JSON.stringify(i)}`:o;return this.memo.has(a)||this.memo.set(a,this.service.translate(o,i,e)),this.memo.get(a)}}resolveLoadingContent(){return this.inlineTpl||this.providedLoadingTpl}ngOnDestroy(){this.memo.clear()}detachLoader(){this.loaderTplHandler?.detachView()}resolveScope(e,r){let s=this.scopeResolver.resolve({inline:this.inlineScope,provider:r});this.path=this.langResolver.resolveLangPath(e,s);let i=Re(r,s);return this.service._loadDependencies(this.path,i)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ye({type:t,selectors:[["","transloco",""]],inputs:{key:[0,"transloco","key"],params:[0,"translocoParams","params"],inlineScope:[0,"translocoScope","inlineScope"],inlineRead:[0,"translocoRead","inlineRead"],prefix:[0,"translocoPrefix","prefix"],inlineLang:[0,"translocoLang","inlineLang"],inlineTpl:[0,"translocoLoadingTpl","inlineTpl"]},features:[Ve]})}return t})(),jr=(()=>{class t{service;providerScope;providerLang;cdr;subscription=null;lastValue="";lastKey;path;langResolver=new ee;scopeResolver;constructor(e,r,s,i){this.service=e,this.providerScope=r,this.providerLang=s,this.cdr=i,this.scopeResolver=new te(this.service)}transform(e,r,s){if(!e)return e;let i=r?`${e}${JSON.stringify(r)}`:e;if(i===this.lastKey)return this.lastValue;this.lastKey=i,this.subscription?.unsubscribe();let o=xt(this.service,this.providerLang||s);return this.subscription=this.service.langChanges$.pipe(E(a=>{let c=this.langResolver.resolve({inline:s,provider:this.providerLang,active:a});return Array.isArray(this.providerScope)?G(this.providerScope.map(l=>this.resolveScope(c,l))):this.resolveScope(c,this.providerScope)}),jt(o)).subscribe(()=>this.updateValue(e,r)),this.lastValue}ngOnDestroy(){this.subscription?.unsubscribe(),this.subscription=null}updateValue(e,r){let s=this.langResolver.resolveLangBasedOnScope(this.path);this.lastValue=this.service.translate(e,r,s),this.cdr.markForCheck()}resolveScope(e,r){let s=this.scopeResolver.resolve({inline:void 0,provider:r});this.path=this.langResolver.resolveLangPath(e,s);let i=Re(r,s);return this.service._loadDependencies(this.path,i)}static \u0275fac=function(r){return new(r||t)(U(re,16),U(Ee,24),U(Ft,24),U(X,16))};static \u0275pipe=Ze({name:"transloco",type:t,pure:!1})}return t})();function Ct(t){let n=[Sn(bn),jn(Ln),kn(Rn),xn(En)];return t.config&&n.push(In(t.config)),t.loader&&n.push(Dn(t.loader)),n}function In(t){return L([{provide:F,useValue:Tn(t)}])}function Dn(t){return L([{provide:At,useClass:t}])}function kr(...t){return t.map(n=>({provide:Ee,useValue:n,multi:!0}))}function Sn(t){return L([{provide:Pt,useClass:t,deps:[F]}])}function xn(t){return L([{provide:St,useClass:t,deps:[F]}])}function jn(t){return L([{provide:It,useClass:t}])}function kn(t){return L([{provide:Dt,useClass:t}])}var Fr=new y("TRANSLOCO_TEST_LANGS - Available testing languages"),Cr=new y("TRANSLOCO_TEST_OPTIONS - Testing options");var se=[{id:"en",label:"English"},{id:"fa",label:"\u0641\u0627\u0631\u0633\u06CC"}];var Vr=(t,n="i18n")=>se.reduce((e,r)=>(e[r.id]=()=>t(r.id,n),e),{});var _t=(()=>{class t{constructor(){this._httpClient=u(ge)}getTranslation(e){return this._httpClient.get(`./assets/i18n/${e}.json`)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var es=()=>[Ct({config:{availableLangs:se,prodMode:!nt()},loader:_t}),Qe(()=>(()=>{let n=u(tt).slice(0,2),e=u(re);return e.setDefaultLang(n),e.setActiveLang(n),()=>De(e.load(n))})()())];export{Z as a,ge as b,sr as c,ir as d,H as e,Lt as f,re as g,xr as h,jr as i,kr as j,se as k,Vr as l,es as m};
